/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};

;// CONCATENATED MODULE: ./resources/overlay_plugin_api.ts
// OverlayPlugin API setup
let inited = false;
let wsUrl = null;
let ws = null;
let queue = [];
let rseqCounter = 0;
const responsePromises = {};
const subscribers = {};

const sendMessage = (msg, cb) => {
  if (ws) {
    if (queue) queue.push(msg);else ws.send(JSON.stringify(msg));
  } else {
    if (queue) queue.push([msg, cb]);else window.OverlayPluginApi.callHandler(JSON.stringify(msg), cb);
  }
};

const processEvent = msg => {
  init();
  const subs = subscribers[msg.type];
  subs === null || subs === void 0 ? void 0 : subs.forEach(sub => {
    try {
      sub(msg);
    } catch (e) {
      console.error(e);
    }
  });
};

const dispatchOverlayEvent = processEvent;
const addOverlayListener = (event, cb) => {
  var _subscribers$event;

  init();

  if (!subscribers[event]) {
    subscribers[event] = [];

    if (!queue) {
      sendMessage({
        call: 'subscribe',
        events: [event]
      });
    }
  }

  (_subscribers$event = subscribers[event]) === null || _subscribers$event === void 0 ? void 0 : _subscribers$event.push(cb);
};
const removeOverlayListener = (event, cb) => {
  init();

  if (subscribers[event]) {
    const list = subscribers[event];
    const pos = list === null || list === void 0 ? void 0 : list.indexOf(cb);
    if (pos !== undefined && pos > -1) list === null || list === void 0 ? void 0 : list.splice(pos, 1);
  }
};

const callOverlayHandlerInternal = _msg => {
  init();
  const msg = { ..._msg,
    rseq: 0
  };
  let p;

  if (ws) {
    msg.rseq = rseqCounter++;
    p = new Promise(resolve => {
      responsePromises[msg.rseq] = resolve;
    });
    sendMessage(msg);
  } else {
    p = new Promise(resolve => {
      sendMessage(msg, data => {
        resolve(data === null ? null : JSON.parse(data));
      });
    });
  }

  return p;
};

const callOverlayHandlerOverrideMap = {};
const callOverlayHandler = _msg => {
  var _callOverlayHandlerOv;

  init(); // If this `as` is incorrect, then it will not find an override.
  // TODO: we could also replace this with a type guard.

  const type = _msg.call;
  const callFunc = (_callOverlayHandlerOv = callOverlayHandlerOverrideMap[type]) !== null && _callOverlayHandlerOv !== void 0 ? _callOverlayHandlerOv : callOverlayHandlerInternal; // The `IOverlayHandler` type guarantees that parameters/return type match
  // one of the overlay handlers.  The OverrideMap also only stores functions
  // that match by the discriminating `call` field, and so any overrides
  // should be correct here.
  // eslint-disable-next-line max-len
  // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-argument

  return callFunc(_msg);
};
const setOverlayHandlerOverride = (type, override) => {
  if (!override) {
    delete callOverlayHandlerOverrideMap[type];
    return;
  }

  callOverlayHandlerOverrideMap[type] = override;
};
const init = () => {
  if (inited) return;

  if (typeof window !== 'undefined') {
    wsUrl = new URLSearchParams(window.location.search).get('OVERLAY_WS');

    if (wsUrl !== null) {
      const connectWs = function (wsUrl) {
        ws = new WebSocket(wsUrl);
        ws.addEventListener('error', e => {
          console.error(e);
        });
        ws.addEventListener('open', () => {
          var _queue;

          console.log('Connected!');
          const q = (_queue = queue) !== null && _queue !== void 0 ? _queue : [];
          queue = null;
          sendMessage({
            call: 'subscribe',
            events: Object.keys(subscribers)
          });

          for (const msg of q) {
            if (!Array.isArray(msg)) sendMessage(msg);
          }
        });
        ws.addEventListener('message', _msg => {
          try {
            if (typeof _msg.data !== 'string') {
              console.error('Invalid message data received: ', _msg);
              return;
            }

            const msg = JSON.parse(_msg.data);

            if (msg.rseq !== undefined && responsePromises[msg.rseq]) {
              var _responsePromises$msg;

              (_responsePromises$msg = responsePromises[msg.rseq]) === null || _responsePromises$msg === void 0 ? void 0 : _responsePromises$msg.call(responsePromises, msg);
              delete responsePromises[msg.rseq];
            } else {
              processEvent(msg);
            }
          } catch (e) {
            console.error('Invalid message received: ', _msg);
            return;
          }
        });
        ws.addEventListener('close', () => {
          queue = null;
          console.log('Trying to reconnect...'); // Don't spam the server with retries.

          window.setTimeout(() => {
            connectWs(wsUrl);
          }, 300);
        });
      };

      connectWs(wsUrl);
    } else {
      const waitForApi = function () {
        var _queue2;

        if (!window.OverlayPluginApi || !window.OverlayPluginApi.ready) {
          window.setTimeout(waitForApi, 300);
          return;
        }

        const q = (_queue2 = queue) !== null && _queue2 !== void 0 ? _queue2 : [];
        queue = null;
        window.__OverlayCallback = processEvent;
        sendMessage({
          call: 'subscribe',
          events: Object.keys(subscribers)
        });

        for (const item of q) {
          if (Array.isArray(item)) sendMessage(item[0], item[1]);
        }
      };

      waitForApi();
    } // Here the OverlayPlugin API is registered to the window object,
    // but this is mainly for backwards compatibility.For cactbot's built-in files,
    // it is recommended to use the various functions exported in resources/overlay_plugin_api.ts.


    window.addOverlayListener = addOverlayListener;
    window.removeOverlayListener = removeOverlayListener;
    window.callOverlayHandler = callOverlayHandler;
    window.dispatchOverlayEvent = dispatchOverlayEvent;
  }

  inited = true;
};
;// CONCATENATED MODULE: ./ui/test/test.ts


addOverlayListener('ChangeZone', e => {
  const currentZone = document.getElementById('currentZone');
  if (currentZone) currentZone.innerText = `currentZone: ${e.zoneName} (${e.zoneID})`;
});
addOverlayListener('onInCombatChangedEvent', e => {
  const inCombat = document.getElementById('inCombat');

  if (inCombat) {
    inCombat.innerText = `inCombat: act: ${e.detail.inACTCombat ? 'yes' : 'no'} game: ${e.detail.inGameCombat ? 'yes' : 'no'}`;
  }
});
addOverlayListener('onPlayerChangedEvent', e => {
  const name = document.getElementById('name');
  if (name) name.innerText = e.detail.name;
  const playerId = document.getElementById('playerId');
  if (playerId) playerId.innerText = parseInt(e.detail.id).toString(16);
  const hp = document.getElementById('hp');
  if (hp) hp.innerText = `${e.detail.currentHP}/${e.detail.maxHP} (${e.detail.currentShield})`;
  const mp = document.getElementById('mp');
  if (mp) mp.innerText = `${e.detail.currentMP}/${e.detail.maxMP}`;
  const cp = document.getElementById('cp');
  if (cp) cp.innerText = `${e.detail.currentCP}/${e.detail.maxCP}`;
  const gp = document.getElementById('gp');
  if (gp) gp.innerText = `${e.detail.currentGP}/${e.detail.maxGP}`;
  const job = document.getElementById('job');
  if (job) job.innerText = `${e.detail.level} ${e.detail.job}`;
  const debug = document.getElementById('debug');
  if (debug) debug.innerText = e.detail.debugJob;
  const jobInfo = document.getElementById('jobinfo');

  if (jobInfo) {
    const detail = e.detail;

    if (detail.job === 'RDM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.whiteMana} | ${detail.jobDetail.blackMana}`;
    } else if (detail.job === 'WAR' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.beast.toString();
    } else if (detail.job === 'DRK' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.blood} | ${detail.jobDetail.darksideMilliseconds} | ${detail.jobDetail.darkArts.toString()} | ${detail.jobDetail.livingShadowMilliseconds}`;
    } else if (detail.job === 'GNB' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.cartridges}${detail.jobDetail.continuationState}`;
    } else if (detail.job === 'PLD' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.oath.toString();
    } else if (detail.job === 'BRD' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.songName} | ${detail.jobDetail.songProcs} | ${detail.jobDetail.soulGauge} | ${detail.jobDetail.songMilliseconds}`;
    } else if (detail.job === 'DNC' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.feathers} | ${detail.jobDetail.esprit} | [${detail.jobDetail.steps.join(', ')}] | ${detail.jobDetail.currentStep}`;
    } else if (detail.job === 'NIN' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.hutonMilliseconds} | ${detail.jobDetail.ninkiAmount}`;
    } else if (detail.job === 'DRG' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.bloodMilliseconds} | ${detail.jobDetail.lifeMilliseconds} | ${detail.jobDetail.eyesAmount}`;
    } else if (detail.job === 'BLM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.umbralStacks} (${detail.jobDetail.umbralMilliseconds}) | ${detail.jobDetail.umbralHearts} | ${detail.jobDetail.foulCount} ${detail.jobDetail.enochian.toString()} (${detail.jobDetail.nextPolyglotMilliseconds})`;
    } else if (detail.job === 'THM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.umbralStacks} (${detail.jobDetail.umbralMilliseconds})`;
    } else if (detail.job === 'WHM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.lilyStacks} (${detail.jobDetail.lilyMilliseconds}) | ${detail.jobDetail.bloodlilyStacks}`;
    } else if (detail.job === 'SMN' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.aetherflowStacks} | ${detail.jobDetail.dreadwyrmStacks} | ${detail.jobDetail.bahamutStance} | ${detail.jobDetail.bahamutSummoned} (${detail.jobDetail.stanceMilliseconds}) | ${detail.jobDetail.phoenixReady}`;
    } else if (detail.job === 'SCH' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.aetherflowStacks} | ${detail.jobDetail.fairyGauge} | ${detail.jobDetail.fairyStatus} (${detail.jobDetail.fairyMilliseconds})`;
    } else if (detail.job === 'ACN' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.aetherflowStacks.toString();
    } else if (detail.job === 'AST' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.heldCard} [${detail.jobDetail.arcanums.join(', ')}]`;
    } else if (detail.job === 'MNK' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.chakraStacks}`;
    } else if (detail.job === 'MCH' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.heat} (${detail.jobDetail.overheatMilliseconds}) | ${detail.jobDetail.battery} (${detail.jobDetail.batteryMilliseconds}) | last: ${detail.jobDetail.lastBatteryAmount} | ${detail.jobDetail.overheatActive.toString()} | ${detail.jobDetail.robotActive.toString()}`;
    } else if (detail.job === 'SAM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.kenki} | ${detail.jobDetail.meditationStacks}(${detail.jobDetail.setsu.toString()},${detail.jobDetail.getsu.toString()},${detail.jobDetail.ka.toString()})`;
    } else {
      jobInfo.innerText = '';
    }
  }

  const pos = document.getElementById('pos');

  if (pos) {
    pos.innerText = `${e.detail.pos.x.toFixed(2)},${e.detail.pos.y.toFixed(2)},${e.detail.pos.z.toFixed(2)}`;
  }

  const rotation = document.getElementById('rotation');
  if (rotation) rotation.innerText = e.detail.rotation.toString();
  const bait = document.getElementById('bait');
  if (bait) bait.innerText = e.detail.bait.toString();
});
addOverlayListener('EnmityTargetData', e => {
  const target = document.getElementById('target');
  if (target) target.innerText = e.Target ? e.Target.Name : '--';
  const tid = document.getElementById('tid');
  if (tid) tid.innerText = e.Target ? e.Target.ID.toString(16) : '';
  const tdistance = document.getElementById('tdistance');
  if (tdistance) tdistance.innerText = e.Target ? e.Target.Distance.toString() : '';
});
addOverlayListener('onGameExistsEvent', _e => {// console.log("Game exists: " + e.detail.exists);
});
addOverlayListener('onGameActiveChangedEvent', _e => {// console.log("Game active: " + e.detail.active);
});
addOverlayListener('onLogEvent', e => {
  e.detail.logs.forEach(log => {
    // Match "/echo tts:<stuff>"
    const r = /00:0038:tts:(.*)/.exec(log);

    if (r && r[1]) {
      void callOverlayHandler({
        call: 'cactbotSay',
        text: r[1]
      });
    }
  });
});
addOverlayListener('onUserFileChanged', e => {
  console.log(`User file ${e.file} changed!`);
});
addOverlayListener('FileChanged', e => {
  console.log(`File ${e.file} changed!`);
});
void callOverlayHandler({
  call: 'cactbotRequestState'
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYWN0Ym90Ly4vcmVzb3VyY2VzL292ZXJsYXlfcGx1Z2luX2FwaS50cyIsIndlYnBhY2s6Ly9jYWN0Ym90Ly4vdWkvdGVzdC90ZXN0LnRzIl0sIm5hbWVzIjpbImluaXRlZCIsIndzVXJsIiwid3MiLCJxdWV1ZSIsInJzZXFDb3VudGVyIiwicmVzcG9uc2VQcm9taXNlcyIsInN1YnNjcmliZXJzIiwic2VuZE1lc3NhZ2UiLCJtc2ciLCJjYiIsInB1c2giLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsIndpbmRvdyIsIk92ZXJsYXlQbHVnaW5BcGkiLCJjYWxsSGFuZGxlciIsInByb2Nlc3NFdmVudCIsImluaXQiLCJzdWJzIiwidHlwZSIsImZvckVhY2giLCJzdWIiLCJlIiwiY29uc29sZSIsImVycm9yIiwiZGlzcGF0Y2hPdmVybGF5RXZlbnQiLCJhZGRPdmVybGF5TGlzdGVuZXIiLCJldmVudCIsImNhbGwiLCJldmVudHMiLCJyZW1vdmVPdmVybGF5TGlzdGVuZXIiLCJsaXN0IiwicG9zIiwiaW5kZXhPZiIsInVuZGVmaW5lZCIsInNwbGljZSIsImNhbGxPdmVybGF5SGFuZGxlckludGVybmFsIiwiX21zZyIsInJzZXEiLCJwIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYXRhIiwicGFyc2UiLCJjYWxsT3ZlcmxheUhhbmRsZXJPdmVycmlkZU1hcCIsImNhbGxPdmVybGF5SGFuZGxlciIsImNhbGxGdW5jIiwic2V0T3ZlcmxheUhhbmRsZXJPdmVycmlkZSIsIm92ZXJyaWRlIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJnZXQiLCJjb25uZWN0V3MiLCJXZWJTb2NrZXQiLCJhZGRFdmVudExpc3RlbmVyIiwibG9nIiwicSIsIk9iamVjdCIsImtleXMiLCJBcnJheSIsImlzQXJyYXkiLCJzZXRUaW1lb3V0Iiwid2FpdEZvckFwaSIsInJlYWR5IiwiX19PdmVybGF5Q2FsbGJhY2siLCJpdGVtIiwiY3VycmVudFpvbmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJUZXh0Iiwiem9uZU5hbWUiLCJ6b25lSUQiLCJpbkNvbWJhdCIsImRldGFpbCIsImluQUNUQ29tYmF0IiwiaW5HYW1lQ29tYmF0IiwibmFtZSIsInBsYXllcklkIiwicGFyc2VJbnQiLCJpZCIsInRvU3RyaW5nIiwiaHAiLCJjdXJyZW50SFAiLCJtYXhIUCIsImN1cnJlbnRTaGllbGQiLCJtcCIsImN1cnJlbnRNUCIsIm1heE1QIiwiY3AiLCJjdXJyZW50Q1AiLCJtYXhDUCIsImdwIiwiY3VycmVudEdQIiwibWF4R1AiLCJqb2IiLCJsZXZlbCIsImRlYnVnIiwiZGVidWdKb2IiLCJqb2JJbmZvIiwiam9iRGV0YWlsIiwid2hpdGVNYW5hIiwiYmxhY2tNYW5hIiwiYmVhc3QiLCJibG9vZCIsImRhcmtzaWRlTWlsbGlzZWNvbmRzIiwiZGFya0FydHMiLCJsaXZpbmdTaGFkb3dNaWxsaXNlY29uZHMiLCJjYXJ0cmlkZ2VzIiwiY29udGludWF0aW9uU3RhdGUiLCJvYXRoIiwic29uZ05hbWUiLCJzb25nUHJvY3MiLCJzb3VsR2F1Z2UiLCJzb25nTWlsbGlzZWNvbmRzIiwiZmVhdGhlcnMiLCJlc3ByaXQiLCJzdGVwcyIsImpvaW4iLCJjdXJyZW50U3RlcCIsImh1dG9uTWlsbGlzZWNvbmRzIiwibmlua2lBbW91bnQiLCJibG9vZE1pbGxpc2Vjb25kcyIsImxpZmVNaWxsaXNlY29uZHMiLCJleWVzQW1vdW50IiwidW1icmFsU3RhY2tzIiwidW1icmFsTWlsbGlzZWNvbmRzIiwidW1icmFsSGVhcnRzIiwiZm91bENvdW50IiwiZW5vY2hpYW4iLCJuZXh0UG9seWdsb3RNaWxsaXNlY29uZHMiLCJsaWx5U3RhY2tzIiwibGlseU1pbGxpc2Vjb25kcyIsImJsb29kbGlseVN0YWNrcyIsImFldGhlcmZsb3dTdGFja3MiLCJkcmVhZHd5cm1TdGFja3MiLCJiYWhhbXV0U3RhbmNlIiwiYmFoYW11dFN1bW1vbmVkIiwic3RhbmNlTWlsbGlzZWNvbmRzIiwicGhvZW5peFJlYWR5IiwiZmFpcnlHYXVnZSIsImZhaXJ5U3RhdHVzIiwiZmFpcnlNaWxsaXNlY29uZHMiLCJoZWxkQ2FyZCIsImFyY2FudW1zIiwiY2hha3JhU3RhY2tzIiwiaGVhdCIsIm92ZXJoZWF0TWlsbGlzZWNvbmRzIiwiYmF0dGVyeSIsImJhdHRlcnlNaWxsaXNlY29uZHMiLCJsYXN0QmF0dGVyeUFtb3VudCIsIm92ZXJoZWF0QWN0aXZlIiwicm9ib3RBY3RpdmUiLCJrZW5raSIsIm1lZGl0YXRpb25TdGFja3MiLCJzZXRzdSIsImdldHN1Iiwia2EiLCJ4IiwidG9GaXhlZCIsInkiLCJ6Iiwicm90YXRpb24iLCJiYWl0IiwidGFyZ2V0IiwiVGFyZ2V0IiwiTmFtZSIsInRpZCIsIklEIiwidGRpc3RhbmNlIiwiRGlzdGFuY2UiLCJfZSIsImxvZ3MiLCJyIiwiZXhlYyIsInRleHQiLCJmaWxlIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBc0RBLElBQUlBLE1BQU0sR0FBRyxLQUFiO0FBRUEsSUFBSUMsS0FBb0IsR0FBRyxJQUEzQjtBQUNBLElBQUlDLEVBQW9CLEdBQUcsSUFBM0I7QUFDQSxJQUFJQyxLQUdNLEdBQUcsRUFIYjtBQUlBLElBQUlDLFdBQVcsR0FBRyxDQUFsQjtBQUNBLE1BQU1DLGdCQUEwRCxHQUFHLEVBQW5FO0FBRUEsTUFBTUMsV0FBMEMsR0FBRyxFQUFuRDs7QUFFQSxNQUFNQyxXQUFXLEdBQUcsQ0FDbEJDLEdBRGtCLEVBRWxCQyxFQUZrQixLQUdUO0FBQ1QsTUFBSVAsRUFBSixFQUFRO0FBQ04sUUFBSUMsS0FBSixFQUNFQSxLQUFLLENBQUNPLElBQU4sQ0FBV0YsR0FBWCxFQURGLEtBR0VOLEVBQUUsQ0FBQ1MsSUFBSCxDQUFRQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUwsR0FBZixDQUFSO0FBQ0gsR0FMRCxNQUtPO0FBQ0wsUUFBSUwsS0FBSixFQUNFQSxLQUFLLENBQUNPLElBQU4sQ0FBVyxDQUFDRixHQUFELEVBQU1DLEVBQU4sQ0FBWCxFQURGLEtBR0VLLE1B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QUFsQjtBQUlBLEtBQUtuSSxrQkFBa0IsQ0FBQztBQUFFakIsTUFBSSxFQUFFO0FBQVIsQ0FBRCxDQUF2QixDIiwiZmlsZSI6InVpL3Rlc3QvdGVzdC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBPdmVybGF5UGx1Z2luIEFQSSBzZXR1cFxyXG5cclxuaW1wb3J0IHtcclxuICBFdmVudE1hcCxcclxuICBFdmVudFR5cGUsXHJcbiAgSU92ZXJsYXlIYW5kbGVyLFxyXG4gIE92ZXJsYXlIYW5kbGVyRnVuY3MsXHJcbiAgT3ZlcmxheUhhbmRsZXJUeXBlcyxcclxufSBmcm9tICcuLi90eXBlcy9ldmVudCc7XHJcblxyXG5kZWNsYXJlIGdsb2JhbCB7XHJcbiAgaW50ZXJmYWNlIFdpbmRvdyB7XHJcbiAgICBfX092ZXJsYXlDYWxsYmFjazogRXZlbnRNYXBbRXZlbnRUeXBlXTtcclxuICAgIGRpc3BhdGNoT3ZlcmxheUV2ZW50PzogdHlwZW9mIHByb2Nlc3NFdmVudDtcclxuICAgIE92ZXJsYXlQbHVnaW5BcGk6IHtcclxuICAgICAgcmVhZHk6IGJvb2xlYW47XHJcbiAgICAgIGNhbGxIYW5kbGVyOiAobXNnOiBzdHJpbmcsIGNiPzogKHZhbHVlOiBzdHJpbmcpID0+IHVua25vd24pID0+IHZvaWQ7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIHJlY29tbWVuZGVkIHRvIGltcG9ydCBmcm9tIHRoaXMgZmlsZTpcclxuICAgICAqXHJcbiAgICAgKiBgaW1wb3J0IHsgYWRkT3ZlcmxheUxpc3RlbmVyIH0gZnJvbSAnL3BhdGgvdG8vb3ZlcmxheV9wbHVnaW5fYXBpJztgXHJcbiAgICAgKi9cclxuICAgIGFkZE92ZXJsYXlMaXN0ZW5lcjogSUFkZE92ZXJsYXlMaXN0ZW5lcjtcclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyByZWNvbW1lbmRlZCB0byBpbXBvcnQgZnJvbSB0aGlzIGZpbGU6XHJcbiAgICAgKlxyXG4gICAgICogYGltcG9ydCB7IHJlbW92ZU92ZXJsYXlMaXN0ZW5lciB9IGZyb20gJy9wYXRoL3RvL292ZXJsYXlfcGx1Z2luX2FwaSc7YFxyXG4gICAgICovXHJcbiAgICByZW1vdmVPdmVybGF5TGlzdGVuZXI6IElSZW1vdmVPdmVybGF5TGlzdGVuZXI7XHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgcmVjb21tZW5kZWQgdG8gaW1wb3J0IGZyb20gdGhpcyBmaWxlOlxyXG4gICAgICpcclxuICAgICAqIGBpbXBvcnQgeyBjYWxsT3ZlcmxheUhhbmRsZXIgfSBmcm9tICcvcGF0aC90by9vdmVybGF5X3BsdWdpbl9hcGknO2BcclxuICAgICAqL1xyXG4gICAgY2FsbE92ZXJsYXlIYW5kbGVyOiBJT3ZlcmxheUhhbmRsZXI7XHJcbiAgfVxyXG59XHJcblxyXG50eXBlIElBZGRPdmVybGF5TGlzdGVuZXIgPSA8VCBleHRlbmRzIEV2ZW50VHlwZT4oZXZlbnQ6IFQsIGNiOiBFdmVudE1hcFtUXSkgPT4gdm9pZDtcclxudHlwZSBJUmVtb3ZlT3ZlcmxheUxpc3RlbmVyID0gPFQgZXh0ZW5kcyBFdmVudFR5cGU+KGV2ZW50OiBULCBjYjogRXZlbnRNYXBbVF0pID0+IHZvaWQ7XHJcblxyXG50eXBlIFN1YnNjcmliZXI8VD4gPSB7XHJcbiAgW2tleSBpbiBFdmVudFR5cGVdPzogVFtdO1xyXG59O1xyXG50eXBlIEV2ZW50UGFyYW1ldGVyID0gUGFyYW1ldGVyczxFdmVudE1hcFtFdmVudFR5cGVdPlswXTtcclxudHlwZSBWb2lkRnVuYzxUPiA9ICguLi5hcmdzOiBUW10pID0+IHZvaWQ7XHJcblxyXG5sZXQgaW5pdGVkID0gZmFsc2U7XHJcblxyXG5sZXQgd3NVcmw6IHN0cmluZyB8IG51bGwgPSBudWxsO1xyXG5sZXQgd3M6IFdlYlNvY2tldCB8IG51bGwgPSBudWxsO1xyXG5sZXQgcXVldWU6IChcclxuICB8IHsgW3M6IHN0cmluZ106IHVua25vd24gfVxyXG4gIHwgW3sgW3M6IHN0cmluZ106IHVua25vd24gfSwgKCh2YWx1ZTogc3RyaW5nIHwgbnVsbCkgPT4gdW5rbm93bikgfCB1bmRlZmluZWRdXHJcbilbXSB8IG51bGwgPSBbXTtcclxubGV0IHJzZXFDb3VudGVyID0gMDtcclxuY29uc3QgcmVzcG9uc2VQcm9taXNlczogUmVjb3JkPG51bWJlciwgKHZhbHVlOiB1bmtub3duKSA9PiB2b2lkPiA9IHt9O1xyXG5cclxuY29uc3Qgc3Vic2NyaWJlcnM6IFN1YnNjcmliZXI8Vm9pZEZ1bmM8dW5rbm93bj4+ID0ge307XHJcblxyXG5jb25zdCBzZW5kTWVzc2FnZSA9IChcclxuICBtc2c6IHsgW3M6IHN0cmluZ106IHVua25vd24gfSxcclxuICBjYj86ICh2YWx1ZTogc3RyaW5nIHwgbnVsbCkgPT4gdW5rbm93bixcclxuKTogdm9pZCA9PiB7XHJcbiAgaWYgKHdzKSB7XHJcbiAgICBpZiAocXVldWUpXHJcbiAgICAgIHF1ZXVlLnB1c2gobXNnKTtcclxuICAgIGVsc2VcclxuICAgICAgd3Muc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaWYgKHF1ZXVlKVxyXG4gICAgICBxdWV1ZS5wdXNoKFttc2csIGNiXSk7XHJcbiAgICBlbHNlXHJcbiAgICAgIHdpbmRvdy5PdmVybGF5UGx1Z2luQXBpLmNhbGxIYW5kbGVyKEpTT04uc3RyaW5naWZ5KG1zZyksIGNiKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBwcm9jZXNzRXZlbnQgPSA8VCBleHRlbmRzIEV2ZW50VHlwZT4obXNnOiBQYXJhbWV0ZXJzPEV2ZW50TWFwW1RdPlswXSk6IHZvaWQgPT4ge1xyXG4gIGluaXQoKTtcclxuXHJcbiAgY29uc3Qgc3VicyA9IHN1YnNjcmliZXJzW21zZy50eXBlXTtcclxuICBzdWJzPy5mb3JFYWNoKChzdWIpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIHN1Yihtc2cpO1xyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpc3BhdGNoT3ZlcmxheUV2ZW50ID0gcHJvY2Vzc0V2ZW50O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZE92ZXJsYXlMaXN0ZW5lcjogSUFkZE92ZXJsYXlMaXN0ZW5lciA9IChldmVudCwgY2IpOiB2b2lkID0+IHtcclxuICBpbml0KCk7XHJcblxyXG4gIGlmICghc3Vic2NyaWJlcnNbZXZlbnRdKSB7XHJcbiAgICBzdWJzY3JpYmVyc1tldmVudF0gPSBbXTtcclxuXHJcbiAgICBpZiAoIXF1ZXVlKSB7XHJcbiAgICAgIHNlbmRNZXNzYWdlKHtcclxuICAgICAgICBjYWxsOiAnc3Vic2NyaWJlJyxcclxuICAgICAgICBldmVudHM6IFtldmVudF0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlcnNbZXZlbnRdPy5wdXNoKGNiIGFzIFZvaWRGdW5jPHVua25vd24+KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVPdmVybGF5TGlzdGVuZXI6IElSZW1vdmVPdmVybGF5TGlzdGVuZXIgPSAoZXZlbnQsIGNiKTogdm9pZCA9PiB7XHJcbiAgaW5pdCgpO1xyXG5cclxuICBpZiAoc3Vic2NyaWJlcnNbZXZlbnRdKSB7XHJcbiAgICBjb25zdCBsaXN0ID0gc3Vic2NyaWJlcnNbZXZlbnRdO1xyXG4gICAgY29uc3QgcG9zID0gbGlzdD8uaW5kZXhPZihjYiBhcyBWb2lkRnVuYzx1bmtub3duPik7XHJcblxyXG4gICAgaWYgKHBvcyAhPT0gdW5kZWZpbmVkICYmIHBvcyA+IC0xKVxyXG4gICAgICBsaXN0Py5zcGxpY2UocG9zLCAxKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBjYWxsT3ZlcmxheUhhbmRsZXJJbnRlcm5hbDogSU92ZXJsYXlIYW5kbGVyID0gKFxyXG4gIF9tc2c6IHsgW3M6IHN0cmluZ106IHVua25vd24gfSxcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4pOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gIGluaXQoKTtcclxuXHJcbiAgY29uc3QgbXNnID0ge1xyXG4gICAgLi4uX21zZyxcclxuICAgIHJzZXE6IDAsXHJcbiAgfTtcclxuICBsZXQgcDogUHJvbWlzZTx1bmtub3duPjtcclxuXHJcbiAgaWYgKHdzKSB7XHJcbiAgICBtc2cucnNlcSA9IHJzZXFDb3VudGVyKys7XHJcbiAgICBwID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgcmVzcG9uc2VQcm9taXNlc1ttc2cucnNlcV0gPSByZXNvbHZlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc2VuZE1lc3NhZ2UobXNnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIHNlbmRNZXNzYWdlKG1zZywgKGRhdGEpID0+IHtcclxuICAgICAgICByZXNvbHZlKGRhdGEgPT09IG51bGwgPyBudWxsIDogSlNPTi5wYXJzZShkYXRhKSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcDtcclxufTtcclxuXHJcbnR5cGUgT3ZlcnJpZGVNYXAgPSB7IFtjYWxsIGluIE92ZXJsYXlIYW5kbGVyVHlwZXNdPzogT3ZlcmxheUhhbmRsZXJGdW5jc1tjYWxsXSB9O1xyXG5jb25zdCBjYWxsT3ZlcmxheUhhbmRsZXJPdmVycmlkZU1hcDogT3ZlcnJpZGVNYXAgPSB7fTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYWxsT3ZlcmxheUhhbmRsZXI6IElPdmVybGF5SGFuZGxlciA9IChcclxuICBfbXNnOiB7IFtzOiBzdHJpbmddOiB1bmtub3duIH0sXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICBpbml0KCk7XHJcblxyXG4gIC8vIElmIHRoaXMgYGFzYCBpcyBpbmNvcnJlY3QsIHRoZW4gaXQgd2lsbCBub3QgZmluZCBhbiBvdmVycmlkZS5cclxuICAvLyBUT0RPOiB3ZSBjb3VsZCBhbHNvIHJlcGxhY2UgdGhpcyB3aXRoIGEgdHlwZSBndWFyZC5cclxuICBjb25zdCB0eXBlID0gX21zZy5jYWxsIGFzIGtleW9mIE92ZXJyaWRlTWFwO1xyXG4gIGNvbnN0IGNhbGxGdW5jID0gY2FsbE92ZXJsYXlIYW5kbGVyT3ZlcnJpZGVNYXBbdHlwZV0gPz8gY2FsbE92ZXJsYXlIYW5kbGVySW50ZXJuYWw7XHJcblxyXG4gIC8vIFRoZSBgSU92ZXJsYXlIYW5kbGVyYCB0eXBlIGd1YXJhbnRlZXMgdGhhdCBwYXJhbWV0ZXJzL3JldHVybiB0eXBlIG1hdGNoXHJcbiAgLy8gb25lIG9mIHRoZSBvdmVybGF5IGhhbmRsZXJzLiAgVGhlIE92ZXJyaWRlTWFwIGFsc28gb25seSBzdG9yZXMgZnVuY3Rpb25zXHJcbiAgLy8gdGhhdCBtYXRjaCBieSB0aGUgZGlzY3JpbWluYXRpbmcgYGNhbGxgIGZpZWxkLCBhbmQgc28gYW55IG92ZXJyaWRlc1xyXG4gIC8vIHNob3VsZCBiZSBjb3JyZWN0IGhlcmUuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSxAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLWFyZ3VtZW50XHJcbiAgcmV0dXJuIGNhbGxGdW5jKF9tc2cgYXMgYW55KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXRPdmVybGF5SGFuZGxlck92ZXJyaWRlID0gPFQgZXh0ZW5kcyBrZXlvZiBPdmVybGF5SGFuZGxlckZ1bmNzPihcclxuICB0eXBlOiBULFxyXG4gIG92ZXJyaWRlPzogT3ZlcmxheUhhbmRsZXJGdW5jc1tUXSxcclxuKTogdm9pZCA9PiB7XHJcbiAgaWYgKCFvdmVycmlkZSkge1xyXG4gICAgZGVsZXRlIGNhbGxPdmVybGF5SGFuZGxlck92ZXJyaWRlTWFwW3R5cGVdO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBjYWxsT3ZlcmxheUhhbmRsZXJPdmVycmlkZU1hcFt0eXBlXSA9IG92ZXJyaWRlO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXQgPSAoKTogdm9pZCA9PiB7XHJcbiAgaWYgKGluaXRlZClcclxuICAgIHJldHVybjtcclxuXHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICB3c1VybCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCdPVkVSTEFZX1dTJyk7XHJcbiAgICBpZiAod3NVcmwgIT09IG51bGwpIHtcclxuICAgICAgY29uc3QgY29ubmVjdFdzID0gZnVuY3Rpb24od3NVcmw6IHN0cmluZykge1xyXG4gICAgICAgIHdzID0gbmV3IFdlYlNvY2tldCh3c1VybCk7XHJcblxyXG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGUpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIScpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHEgPSBxdWV1ZSA/PyBbXTtcclxuICAgICAgICAgIHF1ZXVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBzZW5kTWVzc2FnZSh7XHJcbiAgICAgICAgICAgIGNhbGw6ICdzdWJzY3JpYmUnLFxyXG4gICAgICAgICAgICBldmVudHM6IE9iamVjdC5rZXlzKHN1YnNjcmliZXJzKSxcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIGZvciAoY29uc3QgbXNnIG9mIHEpIHtcclxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG1zZykpXHJcbiAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UobXNnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChfbXNnKSA9PiB7XHJcbiAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIF9tc2cuZGF0YSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIG1lc3NhZ2UgZGF0YSByZWNlaXZlZDogJywgX21zZyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IEpTT04ucGFyc2UoX21zZy5kYXRhKSBhcyBFdmVudFBhcmFtZXRlciAmIHsgcnNlcT86IG51bWJlciB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKG1zZy5yc2VxICE9PSB1bmRlZmluZWQgJiYgcmVzcG9uc2VQcm9taXNlc1ttc2cucnNlcV0pIHtcclxuICAgICAgICAgICAgICByZXNwb25zZVByb21pc2VzW21zZy5yc2VxXT8uKG1zZyk7XHJcbiAgICAgICAgICAgICAgZGVsZXRlIHJlc3BvbnNlUHJvbWlzZXNbbXNnLnJzZXFdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHByb2Nlc3NFdmVudChtc2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgbWVzc2FnZSByZWNlaXZlZDogJywgX21zZyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICBxdWV1ZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1RyeWluZyB0byByZWNvbm5lY3QuLi4nKTtcclxuICAgICAgICAgIC8vIERvbid0IHNwYW0gdGhlIHNlcnZlciB3aXRoIHJldHJpZXMuXHJcbiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbm5lY3RXcyh3c1VybCk7XHJcbiAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgY29ubmVjdFdzKHdzVXJsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHdhaXRGb3JBcGkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5PdmVybGF5UGx1Z2luQXBpIHx8ICF3aW5kb3cuT3ZlcmxheVBsdWdpbkFwaS5yZWFkeSkge1xyXG4gICAgICAgICAgd2luZG93LnNldFRpbWVvdXQod2FpdEZvckFwaSwgMzAwKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHEgPSBxdWV1ZSA/PyBbXTtcclxuICAgICAgICBxdWV1ZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHdpbmRvdy5fX092ZXJsYXlDYWxsYmFjayA9IHByb2Nlc3NFdmVudDtcclxuXHJcbiAgICAgICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgY2FsbDogJ3N1YnNjcmliZScsXHJcbiAgICAgICAgICBldmVudHM6IE9iamVjdC5rZXlzKHN1YnNjcmliZXJzKSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHEpIHtcclxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKVxyXG4gICAgICAgICAgICBzZW5kTWVzc2FnZShpdGVtWzBdLCBpdGVtWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB3YWl0Rm9yQXBpKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGVyZSB0aGUgT3ZlcmxheVBsdWdpbiBBUEkgaXMgcmVnaXN0ZXJlZCB0byB0aGUgd2luZG93IG9iamVjdCxcclxuICAgIC8vIGJ1dCB0aGlzIGlzIG1haW5seSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuRm9yIGNhY3Rib3QncyBidWlsdC1pbiBmaWxlcyxcclxuICAgIC8vIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgdmFyaW91cyBmdW5jdGlvbnMgZXhwb3J0ZWQgaW4gcmVzb3VyY2VzL292ZXJsYXlfcGx1Z2luX2FwaS50cy5cclxuICAgIHdpbmRvdy5hZGRPdmVybGF5TGlzdGVuZXIgPSBhZGRPdmVybGF5TGlzdGVuZXI7XHJcbiAgICB3aW5kb3cucmVtb3ZlT3ZlcmxheUxpc3RlbmVyID0gcmVtb3ZlT3ZlcmxheUxpc3RlbmVyO1xyXG4gICAgd2luZG93LmNhbGxPdmVybGF5SGFuZGxlciA9IGNhbGxPdmVybGF5SGFuZGxlcjtcclxuICAgIHdpbmRvdy5kaXNwYXRjaE92ZXJsYXlFdmVudCA9IGRpc3BhdGNoT3ZlcmxheUV2ZW50O1xyXG4gIH1cclxuXHJcbiAgaW5pdGVkID0gdHJ1ZTtcclxufTtcclxuIiwiaW1wb3J0IHsgYWRkT3ZlcmxheUxpc3RlbmVyLCBjYWxsT3ZlcmxheUhhbmRsZXIgfSBmcm9tICcuLi8uLi9yZXNvdXJjZXMvb3ZlcmxheV9wbHVnaW5fYXBpJztcclxuXHJcbmltcG9ydCAnLi4vLi4vcmVzb3VyY2VzL2RlZmF1bHRzLmNzcyc7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ0NoYW5nZVpvbmUnLCAoZSkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRab25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRab25lJyk7XHJcbiAgaWYgKGN1cnJlbnRab25lKVxyXG4gICAgY3VycmVudFpvbmUuaW5uZXJUZXh0ID0gYGN1cnJlbnRab25lOiAke2Uuem9uZU5hbWV9ICgke2Uuem9uZUlEfSlgO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25JbkNvbWJhdENoYW5nZWRFdmVudCcsIChlKSA9PiB7XHJcbiAgY29uc3QgaW5Db21iYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5Db21iYXQnKTtcclxuICBpZiAoaW5Db21iYXQpIHtcclxuICAgIGluQ29tYmF0LmlubmVyVGV4dCA9IGBpbkNvbWJhdDogYWN0OiAke1xyXG4gICAgICBlLmRldGFpbC5pbkFDVENvbWJhdCA/ICd5ZXMnIDogJ25vJ1xyXG4gICAgfSBnYW1lOiAkeyhlLmRldGFpbC5pbkdhbWVDb21iYXQgPyAneWVzJyA6ICdubycpfWA7XHJcbiAgfVxyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25QbGF5ZXJDaGFuZ2VkRXZlbnQnLCAoZSkgPT4ge1xyXG4gIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmFtZScpO1xyXG4gIGlmIChuYW1lKVxyXG4gICAgbmFtZS5pbm5lclRleHQgPSBlLmRldGFpbC5uYW1lO1xyXG4gIGNvbnN0IHBsYXllcklkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BsYXllcklkJyk7XHJcbiAgaWYgKHBsYXllcklkKVxyXG4gICAgcGxheWVySWQuaW5uZXJUZXh0ID0gcGFyc2VJbnQoZS5kZXRhaWwuaWQpLnRvU3RyaW5nKDE2KTtcclxuICBjb25zdCBocCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdocCcpO1xyXG4gIGlmIChocClcclxuICAgIGhwLmlubmVyVGV4dCA9IGAke2UuZGV0YWlsLmN1cnJlbnRIUH0vJHtlLmRldGFpbC5tYXhIUH0gKCR7ZS5kZXRhaWwuY3VycmVudFNoaWVsZH0pYDtcclxuICBjb25zdCBtcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtcCcpO1xyXG4gIGlmIChtcClcclxuICAgIG1wLmlubmVyVGV4dCA9IGAke2UuZGV0YWlsLmN1cnJlbnRNUH0vJHtlLmRldGFpbC5tYXhNUH1gO1xyXG4gIGNvbnN0IGNwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NwJyk7XHJcbiAgaWYgKGNwKVxyXG4gICAgY3AuaW5uZXJUZXh0ID0gYCR7ZS5kZXRhaWwuY3VycmVudENQfS8ke2UuZGV0YWlsLm1heENQfWA7XHJcbiAgY29uc3QgZ3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZ3AnKTtcclxuICBpZiAoZ3ApXHJcbiAgICBncC5pbm5lclRleHQgPSBgJHtlLmRldGFpbC5jdXJyZW50R1B9LyR7ZS5kZXRhaWwubWF4R1B9YDtcclxuICBjb25zdCBqb2IgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnam9iJyk7XHJcbiAgaWYgKGpvYilcclxuICAgIGpvYi5pbm5lclRleHQgPSBgJHtlLmRldGFpbC5sZXZlbH0gJHtlLmRldGFpbC5qb2J9YDtcclxuICBjb25zdCBkZWJ1ZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWJ1ZycpO1xyXG4gIGlmIChkZWJ1ZylcclxuICAgIGRlYnVnLmlubmVyVGV4dCA9IGUuZGV0YWlsLmRlYnVnSm9iO1xyXG5cclxuICBjb25zdCBqb2JJbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pvYmluZm8nKTtcclxuICBpZiAoam9iSW5mbykge1xyXG4gICAgY29uc3QgZGV0YWlsID0gZS5kZXRhaWw7XHJcbiAgICBpZiAoZGV0YWlsLmpvYiA9PT0gJ1JETScgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGAke2RldGFpbC5qb2JEZXRhaWwud2hpdGVNYW5hfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5ibGFja01hbmF9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ1dBUicgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGRldGFpbC5qb2JEZXRhaWwuYmVhc3QudG9TdHJpbmcoKTtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0RSSycgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5ibG9vZH0gfCAke2RldGFpbC5qb2JEZXRhaWwuZGFya3NpZGVNaWxsaXNlY29uZHN9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmRhcmtBcnRzLnRvU3RyaW5nKCl9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmxpdmluZ1NoYWRvd01pbGxpc2Vjb25kc31gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnR05CJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gYCR7ZGV0YWlsLmpvYkRldGFpbC5jYXJ0cmlkZ2VzfSR7ZGV0YWlsLmpvYkRldGFpbC5jb250aW51YXRpb25TdGF0ZX1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnUExEJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gZGV0YWlsLmpvYkRldGFpbC5vYXRoLnRvU3RyaW5nKCk7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdCUkQnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwuc29uZ05hbWV9IHwgJHtkZXRhaWwuam9iRGV0YWlsLnNvbmdQcm9jc30gfCAke2RldGFpbC5qb2JEZXRhaWwuc291bEdhdWdlfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5zb25nTWlsbGlzZWNvbmRzfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdETkMnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBgJHtkZXRhaWwuam9iRGV0YWlsLmZlYXRoZXJzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5lc3ByaXR9IHwgWyR7XHJcbiAgICAgICAgZGV0YWlsLmpvYkRldGFpbC5zdGVwcy5qb2luKCcsICcpXHJcbiAgICAgIH1dIHwgJHtkZXRhaWwuam9iRGV0YWlsLmN1cnJlbnRTdGVwfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdOSU4nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBgJHtkZXRhaWwuam9iRGV0YWlsLmh1dG9uTWlsbGlzZWNvbmRzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5uaW5raUFtb3VudH1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnRFJHJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLmJsb29kTWlsbGlzZWNvbmRzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5saWZlTWlsbGlzZWNvbmRzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5leWVzQW1vdW50fWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdCTE0nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwudW1icmFsU3RhY2tzfSAoJHtkZXRhaWwuam9iRGV0YWlsLnVtYnJhbE1pbGxpc2Vjb25kc30pIHwgJHtkZXRhaWwuam9iRGV0YWlsLnVtYnJhbEhlYXJ0c30gfCAke2RldGFpbC5qb2JEZXRhaWwuZm91bENvdW50fSAke2RldGFpbC5qb2JEZXRhaWwuZW5vY2hpYW4udG9TdHJpbmcoKX0gKCR7ZGV0YWlsLmpvYkRldGFpbC5uZXh0UG9seWdsb3RNaWxsaXNlY29uZHN9KWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdUSE0nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwudW1icmFsU3RhY2tzfSAoJHtkZXRhaWwuam9iRGV0YWlsLnVtYnJhbE1pbGxpc2Vjb25kc30pYDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ1dITScgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5saWx5U3RhY2tzfSAoJHtkZXRhaWwuam9iRGV0YWlsLmxpbHlNaWxsaXNlY29uZHN9KSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5ibG9vZGxpbHlTdGFja3N9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ1NNTicgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5hZXRoZXJmbG93U3RhY2tzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5kcmVhZHd5cm1TdGFja3N9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmJhaGFtdXRTdGFuY2V9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmJhaGFtdXRTdW1tb25lZH0gKCR7ZGV0YWlsLmpvYkRldGFpbC5zdGFuY2VNaWxsaXNlY29uZHN9KSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5waG9lbml4UmVhZHl9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ1NDSCcgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5hZXRoZXJmbG93U3RhY2tzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5mYWlyeUdhdWdlfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5mYWlyeVN0YXR1c30gKCR7ZGV0YWlsLmpvYkRldGFpbC5mYWlyeU1pbGxpc2Vjb25kc30pYDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0FDTicgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGRldGFpbC5qb2JEZXRhaWwuYWV0aGVyZmxvd1N0YWNrcy50b1N0cmluZygpO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnQVNUJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gYCR7ZGV0YWlsLmpvYkRldGFpbC5oZWxkQ2FyZH0gWyR7ZGV0YWlsLmpvYkRldGFpbC5hcmNhbnVtcy5qb2luKCcsICcpfV1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnTU5LJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gYCR7ZGV0YWlsLmpvYkRldGFpbC5jaGFrcmFTdGFja3N9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ01DSCcgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5oZWF0fSAoJHtkZXRhaWwuam9iRGV0YWlsLm92ZXJoZWF0TWlsbGlzZWNvbmRzfSkgfCAke2RldGFpbC5qb2JEZXRhaWwuYmF0dGVyeX0gKCR7ZGV0YWlsLmpvYkRldGFpbC5iYXR0ZXJ5TWlsbGlzZWNvbmRzfSkgfCBsYXN0OiAke2RldGFpbC5qb2JEZXRhaWwubGFzdEJhdHRlcnlBbW91bnR9IHwgJHtkZXRhaWwuam9iRGV0YWlsLm92ZXJoZWF0QWN0aXZlLnRvU3RyaW5nKCl9IHwgJHtkZXRhaWwuam9iRGV0YWlsLnJvYm90QWN0aXZlLnRvU3RyaW5nKCl9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ1NBTScgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5rZW5raX0gfCAke2RldGFpbC5qb2JEZXRhaWwubWVkaXRhdGlvblN0YWNrc30oJHtkZXRhaWwuam9iRGV0YWlsLnNldHN1LnRvU3RyaW5nKCl9LCR7ZGV0YWlsLmpvYkRldGFpbC5nZXRzdS50b1N0cmluZygpfSwke2RldGFpbC5qb2JEZXRhaWwua2EudG9TdHJpbmcoKX0pYDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gJyc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zdCBwb3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncG9zJyk7XHJcbiAgaWYgKHBvcykge1xyXG4gICAgcG9zLmlubmVyVGV4dCA9IGAke2UuZGV0YWlsLnBvcy54LnRvRml4ZWQoMil9LCR7ZS5kZXRhaWwucG9zLnkudG9GaXhlZCgyKX0sJHtcclxuICAgICAgZS5kZXRhaWwucG9zLnoudG9GaXhlZCgyKVxyXG4gICAgfWA7XHJcbiAgfVxyXG4gIGNvbnN0IHJvdGF0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JvdGF0aW9uJyk7XHJcbiAgaWYgKHJvdGF0aW9uKVxyXG4gICAgcm90YXRpb24uaW5uZXJUZXh0ID0gZS5kZXRhaWwucm90YXRpb24udG9TdHJpbmcoKTtcclxuICBjb25zdCBiYWl0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhaXQnKTtcclxuICBpZiAoYmFpdClcclxuICAgIGJhaXQuaW5uZXJUZXh0ID0gZS5kZXRhaWwuYmFpdC50b1N0cmluZygpO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignRW5taXR5VGFyZ2V0RGF0YScsIChlKSA9PiB7XHJcbiAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhcmdldCcpO1xyXG4gIGlmICh0YXJnZXQpXHJcbiAgICB0YXJnZXQuaW5uZXJUZXh0ID0gZS5UYXJnZXQgPyBlLlRhcmdldC5OYW1lIDogJy0tJztcclxuICBjb25zdCB0aWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGlkJyk7XHJcbiAgaWYgKHRpZClcclxuICAgIHRpZC5pbm5lclRleHQgPSBlLlRhcmdldCA/IGUuVGFyZ2V0LklELnRvU3RyaW5nKDE2KSA6ICcnO1xyXG4gIGNvbnN0IHRkaXN0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZGlzdGFuY2UnKTtcclxuICBpZiAodGRpc3RhbmNlKVxyXG4gICAgdGRpc3RhbmNlLmlubmVyVGV4dCA9IGUuVGFyZ2V0ID8gZS5UYXJnZXQuRGlzdGFuY2UudG9TdHJpbmcoKSA6ICcnO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25HYW1lRXhpc3RzRXZlbnQnLCAoX2UpID0+IHtcclxuICAvLyBjb25zb2xlLmxvZyhcIkdhbWUgZXhpc3RzOiBcIiArIGUuZGV0YWlsLmV4aXN0cyk7XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdvbkdhbWVBY3RpdmVDaGFuZ2VkRXZlbnQnLCAoX2UpID0+IHtcclxuICAvLyBjb25zb2xlLmxvZyhcIkdhbWUgYWN0aXZlOiBcIiArIGUuZGV0YWlsLmFjdGl2ZSk7XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdvbkxvZ0V2ZW50JywgKGUpID0+IHtcclxuICBlLmRldGFpbC5sb2dzLmZvckVhY2goKGxvZykgPT4ge1xyXG4gICAgLy8gTWF0Y2ggXCIvZWNobyB0dHM6PHN0dWZmPlwiXHJcbiAgICBjb25zdCByID0gLzAwOjAwMzg6dHRzOiguKikvLmV4ZWMobG9nKTtcclxuICAgIGlmIChyICYmIHJbMV0pIHtcclxuICAgICAgdm9pZCBjYWxsT3ZlcmxheUhhbmRsZXIoe1xyXG4gICAgICAgIGNhbGw6ICdjYWN0Ym90U2F5JyxcclxuICAgICAgICB0ZXh0OiByWzFdLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ29uVXNlckZpbGVDaGFuZ2VkJywgKGUpID0+IHtcclxuICBjb25zb2xlLmxvZyhgVXNlciBmaWxlICR7ZS5maWxlfSBjaGFuZ2VkIWApO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignRmlsZUNoYW5nZWQnLCAoZSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBGaWxlICR7ZS5maWxlfSBjaGFuZ2VkIWApO1xyXG59KTtcclxuXHJcbnZvaWQgY2FsbE92ZXJsYXlIYW5kbGVyKHsgY2FsbDogJ2NhY3Rib3RSZXF1ZXN0U3RhdGUnIH0pO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9