/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};

;// CONCATENATED MODULE: ./resources/overlay_plugin_api.ts
// OverlayPlugin API setup
let inited = false;
let wsUrl = null;
let ws = null;
let queue = [];
let rseqCounter = 0;
const responsePromises = {};
const subscribers = {};

const sendMessage = (msg, cb) => {
  if (ws) {
    if (queue) queue.push(msg);else ws.send(JSON.stringify(msg));
  } else {
    if (queue) queue.push([msg, cb]);else window.OverlayPluginApi.callHandler(JSON.stringify(msg), cb);
  }
};

const processEvent = msg => {
  init();
  const subs = subscribers[msg.type];
  subs === null || subs === void 0 ? void 0 : subs.forEach(sub => {
    try {
      sub(msg);
    } catch (e) {
      console.error(e);
    }
  });
};

const dispatchOverlayEvent = processEvent;
const addOverlayListener = (event, cb) => {
  var _subscribers$event;

  init();

  if (!subscribers[event]) {
    subscribers[event] = [];

    if (!queue) {
      sendMessage({
        call: 'subscribe',
        events: [event]
      });
    }
  }

  (_subscribers$event = subscribers[event]) === null || _subscribers$event === void 0 ? void 0 : _subscribers$event.push(cb);
};
const removeOverlayListener = (event, cb) => {
  init();

  if (subscribers[event]) {
    const list = subscribers[event];
    const pos = list === null || list === void 0 ? void 0 : list.indexOf(cb);
    if (pos !== undefined && pos > -1) list === null || list === void 0 ? void 0 : list.splice(pos, 1);
  }
};

const callOverlayHandlerInternal = _msg => {
  init();
  const msg = { ..._msg,
    rseq: 0
  };
  let p;

  if (ws) {
    msg.rseq = rseqCounter++;
    p = new Promise(resolve => {
      responsePromises[msg.rseq] = resolve;
    });
    sendMessage(msg);
  } else {
    p = new Promise(resolve => {
      sendMessage(msg, data => {
        resolve(data === null ? null : JSON.parse(data));
      });
    });
  }

  return p;
};

const callOverlayHandlerOverrideMap = {};
const callOverlayHandler = _msg => {
  var _callOverlayHandlerOv;

  init(); // If this `as` is incorrect, then it will not find an override.
  // TODO: we could also replace this with a type guard.

  const type = _msg.call;
  const callFunc = (_callOverlayHandlerOv = callOverlayHandlerOverrideMap[type]) !== null && _callOverlayHandlerOv !== void 0 ? _callOverlayHandlerOv : callOverlayHandlerInternal; // The `IOverlayHandler` type guarantees that parameters/return type match
  // one of the overlay handlers.  The OverrideMap also only stores functions
  // that match by the discriminating `call` field, and so any overrides
  // should be correct here.
  // eslint-disable-next-line max-len
  // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-argument

  return callFunc(_msg);
};
const setOverlayHandlerOverride = (type, override) => {
  if (!override) {
    delete callOverlayHandlerOverrideMap[type];
    return;
  }

  callOverlayHandlerOverrideMap[type] = override;
};
const init = () => {
  if (inited) return;

  if (typeof window !== 'undefined') {
    wsUrl = new URLSearchParams(window.location.search).get('OVERLAY_WS');

    if (wsUrl !== null) {
      const connectWs = function (wsUrl) {
        ws = new WebSocket(wsUrl);
        ws.addEventListener('error', e => {
          console.error(e);
        });
        ws.addEventListener('open', () => {
          var _queue;

          console.log('Connected!');
          const q = (_queue = queue) !== null && _queue !== void 0 ? _queue : [];
          queue = null;
          sendMessage({
            call: 'subscribe',
            events: Object.keys(subscribers)
          });

          for (const msg of q) {
            if (!Array.isArray(msg)) sendMessage(msg);
          }
        });
        ws.addEventListener('message', _msg => {
          try {
            if (typeof _msg.data !== 'string') {
              console.error('Invalid message data received: ', _msg);
              return;
            }

            const msg = JSON.parse(_msg.data);

            if (msg.rseq !== undefined && responsePromises[msg.rseq]) {
              var _responsePromises$msg;

              (_responsePromises$msg = responsePromises[msg.rseq]) === null || _responsePromises$msg === void 0 ? void 0 : _responsePromises$msg.call(responsePromises, msg);
              delete responsePromises[msg.rseq];
            } else {
              processEvent(msg);
            }
          } catch (e) {
            console.error('Invalid message received: ', _msg);
            return;
          }
        });
        ws.addEventListener('close', () => {
          queue = null;
          console.log('Trying to reconnect...'); // Don't spam the server with retries.

          window.setTimeout(() => {
            connectWs(wsUrl);
          }, 300);
        });
      };

      connectWs(wsUrl);
    } else {
      const waitForApi = function () {
        var _queue2;

        if (!window.OverlayPluginApi || !window.OverlayPluginApi.ready) {
          window.setTimeout(waitForApi, 300);
          return;
        }

        const q = (_queue2 = queue) !== null && _queue2 !== void 0 ? _queue2 : [];
        queue = null;
        window.__OverlayCallback = processEvent;
        sendMessage({
          call: 'subscribe',
          events: Object.keys(subscribers)
        });

        for (const item of q) {
          if (Array.isArray(item)) sendMessage(item[0], item[1]);
        }
      };

      waitForApi();
    } // Here the OverlayPlugin API is registered to the window object,
    // but this is mainly for backwards compatibility.For cactbot's built-in files,
    // it is recommended to use the various functions exported in resources/overlay_plugin_api.ts.


    window.addOverlayListener = addOverlayListener;
    window.removeOverlayListener = removeOverlayListener;
    window.callOverlayHandler = callOverlayHandler;
    window.dispatchOverlayEvent = dispatchOverlayEvent;
  }

  inited = true;
};
;// CONCATENATED MODULE: ./ui/test/test.ts


addOverlayListener('ChangeZone', e => {
  const currentZone = document.getElementById('currentZone');
  if (currentZone) currentZone.innerText = `currentZone: ${e.zoneName} (${e.zoneID})`;
});
addOverlayListener('onInCombatChangedEvent', e => {
  const inCombat = document.getElementById('inCombat');

  if (inCombat) {
    inCombat.innerText = `inCombat: act: ${e.detail.inACTCombat ? 'yes' : 'no'} game: ${e.detail.inGameCombat ? 'yes' : 'no'}`;
  }
});
addOverlayListener('onPlayerChangedEvent', e => {
  const name = document.getElementById('name');
  if (name) name.innerText = e.detail.name;
  const playerId = document.getElementById('playerId');
  if (playerId) playerId.innerText = e.detail.id.toString(16);
  const hp = document.getElementById('hp');
  if (hp) hp.innerText = `${e.detail.currentHP}/${e.detail.maxHP} (${e.detail.currentShield})`;
  const mp = document.getElementById('mp');
  if (mp) mp.innerText = `${e.detail.currentMP}/${e.detail.maxMP}`;
  const cp = document.getElementById('cp');
  if (cp) cp.innerText = `${e.detail.currentCP}/${e.detail.maxCP}`;
  const gp = document.getElementById('gp');
  if (gp) gp.innerText = `${e.detail.currentGP}/${e.detail.maxGP}`;
  const job = document.getElementById('job');
  if (job) job.innerText = `${e.detail.level} ${e.detail.job}`;
  const debug = document.getElementById('debug');
  if (debug) debug.innerText = e.detail.debugJob;
  const jobInfo = document.getElementById('jobinfo');

  if (jobInfo) {
    const detail = e.detail;

    if (detail.job === 'RDM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.whiteMana} | ${detail.jobDetail.blackMana}`;
    } else if (detail.job === 'WAR' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.beast.toString();
    } else if (detail.job === 'DRK' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.blood} | ${detail.jobDetail.darksideMilliseconds} | ${detail.jobDetail.darkArts.toString()} | ${detail.jobDetail.livingShadowMilliseconds}`;
    } else if (detail.job === 'GNB' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.cartridges}${detail.jobDetail.continuationState}`;
    } else if (detail.job === 'PLD' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.oath.toString();
    } else if (detail.job === 'BRD' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.songName} | ${detail.jobDetail.songProcs} | ${detail.jobDetail.soulGauge} | ${detail.jobDetail.songMilliseconds}`;
    } else if (detail.job === 'DNC' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.feathers} | ${detail.jobDetail.esprit} | [${detail.jobDetail.steps.join(', ')}] | ${detail.jobDetail.currentStep}`;
    } else if (detail.job === 'NIN' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.hutonMilliseconds} | ${detail.jobDetail.ninkiAmount}`;
    } else if (detail.job === 'DRG' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.bloodMilliseconds} | ${detail.jobDetail.lifeMilliseconds} | ${detail.jobDetail.eyesAmount}`;
    } else if (detail.job === 'BLM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.umbralStacks} (${detail.jobDetail.umbralMilliseconds}) | ${detail.jobDetail.umbralHearts} | ${detail.jobDetail.foulCount} ${detail.jobDetail.enochian.toString()} (${detail.jobDetail.nextPolyglotMilliseconds})`;
    } else if (detail.job === 'THM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.umbralStacks} (${detail.jobDetail.umbralMilliseconds})`;
    } else if (detail.job === 'WHM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.lilyStacks} (${detail.jobDetail.lilyMilliseconds}) | ${detail.jobDetail.bloodlilyStacks}`;
    } else if (detail.job === 'SMN' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.aetherflowStacks} | ${detail.jobDetail.dreadwyrmStacks} | ${detail.jobDetail.bahamutStance} | ${detail.jobDetail.bahamutSummoned} (${detail.jobDetail.stanceMilliseconds}) | ${detail.jobDetail.phoenixReady}`;
    } else if (detail.job === 'SCH' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.aetherflowStacks} | ${detail.jobDetail.fairyGauge} | ${detail.jobDetail.fairyStatus} (${detail.jobDetail.fairyMilliseconds})`;
    } else if (detail.job === 'ACN' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.aetherflowStacks.toString();
    } else if (detail.job === 'AST' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.heldCard} [${detail.jobDetail.arcanums.join(', ')}]`;
    } else if (detail.job === 'MNK' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.chakraStacks}`;
    } else if (detail.job === 'MCH' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.heat} (${detail.jobDetail.overheatMilliseconds}) | ${detail.jobDetail.battery} (${detail.jobDetail.batteryMilliseconds}) | last: ${detail.jobDetail.lastBatteryAmount} | ${detail.jobDetail.overheatActive.toString()} | ${detail.jobDetail.robotActive.toString()}`;
    } else if (detail.job === 'SAM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.kenki} | ${detail.jobDetail.meditationStacks}(${detail.jobDetail.setsu.toString()},${detail.jobDetail.getsu.toString()},${detail.jobDetail.ka.toString()})`;
    } else {
      jobInfo.innerText = '';
    }
  }

  const pos = document.getElementById('pos');

  if (pos) {
    pos.innerText = `${e.detail.pos.x.toFixed(2)},${e.detail.pos.y.toFixed(2)},${e.detail.pos.z.toFixed(2)}`;
  }

  const rotation = document.getElementById('rotation');
  if (rotation) rotation.innerText = e.detail.rotation.toString();
  const bait = document.getElementById('bait');
  if (bait) bait.innerText = e.detail.bait.toString();
});
addOverlayListener('EnmityTargetData', e => {
  const target = document.getElementById('target');
  if (target) target.innerText = e.Target ? e.Target.Name : '--';
  const tid = document.getElementById('tid');
  if (tid) tid.innerText = e.Target ? e.Target.ID.toString(16) : '';
  const tdistance = document.getElementById('tdistance');
  if (tdistance) tdistance.innerText = e.Target ? e.Target.Distance.toString() : '';
});
addOverlayListener('onGameExistsEvent', _e => {// console.log("Game exists: " + e.detail.exists);
});
addOverlayListener('onGameActiveChangedEvent', _e => {// console.log("Game active: " + e.detail.active);
});
addOverlayListener('onLogEvent', e => {
  e.detail.logs.forEach(log => {
    // Match "/echo tts:<stuff>"
    const r = /00:0038:tts:(.*)/.exec(log);

    if (r && r[1]) {
      void callOverlayHandler({
        call: 'cactbotSay',
        text: r[1]
      });
    }
  });
});
addOverlayListener('onUserFileChanged', e => {
  console.log(`User file ${e.file} changed!`);
});
addOverlayListener('FileChanged', e => {
  console.log(`File ${e.file} changed!`);
});
void callOverlayHandler({
  call: 'cactbotRequestState'
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYWN0Ym90Ly4vcmVzb3VyY2VzL292ZXJsYXlfcGx1Z2luX2FwaS50cyIsIndlYnBhY2s6Ly9jYWN0Ym90Ly4vdWkvdGVzdC90ZXN0LnRzIl0sIm5hbWVzIjpbImluaXRlZCIsIndzVXJsIiwid3MiLCJxdWV1ZSIsInJzZXFDb3VudGVyIiwicmVzcG9uc2VQcm9taXNlcyIsInN1YnNjcmliZXJzIiwic2VuZE1lc3NhZ2UiLCJtc2ciLCJjYiIsInB1c2giLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsIndpbmRvdyIsIk92ZXJsYXlQbHVnaW5BcGkiLCJjYWxsSGFuZGxlciIsInByb2Nlc3NFdmVudCIsImluaXQiLCJzdWJzIiwidHlwZSIsImZvckVhY2giLCJzdWIiLCJlIiwiY29uc29sZSIsImVycm9yIiwiZGlzcGF0Y2hPdmVybGF5RXZlbnQiLCJhZGRPdmVybGF5TGlzdGVuZXIiLCJldmVudCIsImNhbGwiLCJldmVudHMiLCJyZW1vdmVPdmVybGF5TGlzdGVuZXIiLCJsaXN0IiwicG9zIiwiaW5kZXhPZiIsInVuZGVmaW5lZCIsInNwbGljZSIsImNhbGxPdmVybGF5SGFuZGxlckludGVybmFsIiwiX21zZyIsInJzZXEiLCJwIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYXRhIiwicGFyc2UiLCJjYWxsT3ZlcmxheUhhbmRsZXJPdmVycmlkZU1hcCIsImNhbGxPdmVybGF5SGFuZGxlciIsImNhbGxGdW5jIiwic2V0T3ZlcmxheUhhbmRsZXJPdmVycmlkZSIsIm92ZXJyaWRlIiwiVVJMU2VhcmNoUGFyYW1zIiwibG9jYXRpb24iLCJzZWFyY2giLCJnZXQiLCJjb25uZWN0V3MiLCJXZWJTb2NrZXQiLCJhZGRFdmVudExpc3RlbmVyIiwibG9nIiwicSIsIk9iamVjdCIsImtleXMiLCJBcnJheSIsImlzQXJyYXkiLCJzZXRUaW1lb3V0Iiwid2FpdEZvckFwaSIsInJlYWR5IiwiX19PdmVybGF5Q2FsbGJhY2siLCJpdGVtIiwiY3VycmVudFpvbmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJUZXh0Iiwiem9uZU5hbWUiLCJ6b25lSUQiLCJpbkNvbWJhdCIsImRldGFpbCIsImluQUNUQ29tYmF0IiwiaW5HYW1lQ29tYmF0IiwibmFtZSIsInBsYXllcklkIiwiaWQiLCJ0b1N0cmluZyIsImhwIiwiY3VycmVudEhQIiwibWF4SFAiLCJjdXJyZW50U2hpZWxkIiwibXAiLCJjdXJyZW50TVAiLCJtYXhNUCIsImNwIiwiY3VycmVudENQIiwibWF4Q1AiLCJncCIsImN1cnJlbnRHUCIsIm1heEdQIiwiam9iIiwibGV2ZWwiLCJkZWJ1ZyIsImRlYnVnSm9iIiwiam9iSW5mbyIsImpvYkRldGFpbCIsIndoaXRlTWFuYSIsImJsYWNrTWFuYSIsImJlYXN0IiwiYmxvb2QiLCJkYXJrc2lkZU1pbGxpc2Vjb25kcyIsImRhcmtBcnRzIiwibGl2aW5nU2hhZG93TWlsbGlzZWNvbmRzIiwiY2FydHJpZGdlcyIsImNvbnRpbnVhdGlvblN0YXRlIiwib2F0aCIsInNvbmdOYW1lIiwic29uZ1Byb2NzIiwic291bEdhdWdlIiwic29uZ01pbGxpc2Vjb25kcyIsImZlYXRoZXJzIiwiZXNwcml0Iiwic3RlcHMiLCJqb2luIiwiY3VycmVudFN0ZXAiLCJodXRvbk1pbGxpc2Vjb25kcyIsIm5pbmtpQW1vdW50IiwiYmxvb2RNaWxsaXNlY29uZHMiLCJsaWZlTWlsbGlzZWNvbmRzIiwiZXllc0Ftb3VudCIsInVtYnJhbFN0YWNrcyIsInVtYnJhbE1pbGxpc2Vjb25kcyIsInVtYnJhbEhlYXJ0cyIsImZvdWxDb3VudCIsImVub2NoaWFuIiwibmV4dFBvbHlnbG90TWlsbGlzZWNvbmRzIiwibGlseVN0YWNrcyIsImxpbHlNaWxsaXNlY29uZHMiLCJibG9vZGxpbHlTdGFja3MiLCJhZXRoZXJmbG93U3RhY2tzIiwiZHJlYWR3eXJtU3RhY2tzIiwiYmFoYW11dFN0YW5jZSIsImJhaGFtdXRTdW1tb25lZCIsInN0YW5jZU1pbGxpc2Vjb25kcyIsInBob2VuaXhSZWFkeSIsImZhaXJ5R2F1Z2UiLCJmYWlyeVN0YXR1cyIsImZhaXJ5TWlsbGlzZWNvbmRzIiwiaGVsZENhcmQiLCJhcmNhbnVtcyIsImNoYWtyYVN0YWNrcyIsImhlYXQiLCJvdmVyaGVhdE1pbGxpc2Vjb25kcyIsImJhdHRlcnkiLCJiYXR0ZXJ5TWlsbGlzZWNvbmRzIiwibGFzdEJhdHRlcnlBbW91bnQiLCJvdmVyaGVhdEFjdGl2ZSIsInJvYm90QWN0aXZlIiwia2Vua2kiLCJtZWRpdGF0aW9uU3RhY2tzIiwic2V0c3UiLCJnZXRzdSIsImthIiwieCIsInRvRml4ZWQiLCJ5IiwieiIsInJvdGF0aW9uIiwiYmFpdCIsInRhcmdldCIsIlRhcmdldCIsIk5hbWUiLCJ0aWQiLCJJRCIsInRkaXN0YW5jZSIsIkRpc3RhbmNlIiwiX2UiLCJsb2dzIiwiciIsImV4ZWMiLCJ0ZXh0IiwiZmlsZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQXNEQSxJQUFJQSxNQUFNLEdBQUcsS0FBYjtBQUVBLElBQUlDLEtBQW9CLEdBQUcsSUFBM0I7QUFDQSxJQUFJQyxFQUFvQixHQUFHLElBQTNCO0FBQ0EsSUFBSUMsS0FHTSxHQUFHLEVBSGI7QUFJQSxJQUFJQyxXQUFXLEdBQUcsQ0FBbEI7QUFDQSxNQUFNQyxnQkFBMEQsR0FBRyxFQUFuRTtBQUVBLE1BQU1DLFdBQTBDLEdBQUcsRUFBbkQ7O0FBRUEsTUFBTUMsV0FBVyxHQUFHLENBQ2xCQyxHQURrQixFQUVsQkMsRUFGa0IsS0FHVDtBQUNULE1BQUlQLEVBQUosRUFBUTtBQUNOLFFBQUlDLEtBQUosRUFDRUEsS0FBSyxDQUFDTyxJQUFOLENBQVdGLEdBQVgsRUFERixLQUdFTixFQUFFLENBQUNTLElBQUgsQ0FBUUMsSUFBSSxDQUFDQyxTQUFMLENBQWVMLEdBQWYsQ0FBUjtBQUNILEdBTEQsTUFLTztBQUNMLFFBQUlMLEtBQUosRUFDRUEsS0FBSyxDQUFDTyxJQUFOLENBQVcsQ0FBQ0YsR0FBRCxFQUFNQyxFQUFOLENBQVgsRUFERixLQUdFSyxNQUFNLENBQUNDLGdC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QUVqQixNQUFJLEVBQUU7QUFBUixDQUFELENBQXZCLEMiLCJmaWxlIjoidWkvdGVzdC90ZXN0LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE92ZXJsYXlQbHVnaW4gQVBJIHNldHVwXHJcblxyXG5pbXBvcnQge1xyXG4gIEV2ZW50TWFwLFxyXG4gIEV2ZW50VHlwZSxcclxuICBJT3ZlcmxheUhhbmRsZXIsXHJcbiAgT3ZlcmxheUhhbmRsZXJGdW5jcyxcclxuICBPdmVybGF5SGFuZGxlclR5cGVzLFxyXG59IGZyb20gJy4uL3R5cGVzL2V2ZW50JztcclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgIF9fT3ZlcmxheUNhbGxiYWNrOiBFdmVudE1hcFtFdmVudFR5cGVdO1xyXG4gICAgZGlzcGF0Y2hPdmVybGF5RXZlbnQ/OiB0eXBlb2YgcHJvY2Vzc0V2ZW50O1xyXG4gICAgT3ZlcmxheVBsdWdpbkFwaToge1xyXG4gICAgICByZWFkeTogYm9vbGVhbjtcclxuICAgICAgY2FsbEhhbmRsZXI6IChtc2c6IHN0cmluZywgY2I/OiAodmFsdWU6IHN0cmluZykgPT4gdW5rbm93bikgPT4gdm9pZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgcmVjb21tZW5kZWQgdG8gaW1wb3J0IGZyb20gdGhpcyBmaWxlOlxyXG4gICAgICpcclxuICAgICAqIGBpbXBvcnQgeyBhZGRPdmVybGF5TGlzdGVuZXIgfSBmcm9tICcvcGF0aC90by9vdmVybGF5X3BsdWdpbl9hcGknO2BcclxuICAgICAqL1xyXG4gICAgYWRkT3ZlcmxheUxpc3RlbmVyOiBJQWRkT3ZlcmxheUxpc3RlbmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIHJlY29tbWVuZGVkIHRvIGltcG9ydCBmcm9tIHRoaXMgZmlsZTpcclxuICAgICAqXHJcbiAgICAgKiBgaW1wb3J0IHsgcmVtb3ZlT3ZlcmxheUxpc3RlbmVyIH0gZnJvbSAnL3BhdGgvdG8vb3ZlcmxheV9wbHVnaW5fYXBpJztgXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZU92ZXJsYXlMaXN0ZW5lcjogSVJlbW92ZU92ZXJsYXlMaXN0ZW5lcjtcclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyByZWNvbW1lbmRlZCB0byBpbXBvcnQgZnJvbSB0aGlzIGZpbGU6XHJcbiAgICAgKlxyXG4gICAgICogYGltcG9ydCB7IGNhbGxPdmVybGF5SGFuZGxlciB9IGZyb20gJy9wYXRoL3RvL292ZXJsYXlfcGx1Z2luX2FwaSc7YFxyXG4gICAgICovXHJcbiAgICBjYWxsT3ZlcmxheUhhbmRsZXI6IElPdmVybGF5SGFuZGxlcjtcclxuICB9XHJcbn1cclxuXHJcbnR5cGUgSUFkZE92ZXJsYXlMaXN0ZW5lciA9IDxUIGV4dGVuZHMgRXZlbnRUeXBlPihldmVudDogVCwgY2I6IEV2ZW50TWFwW1RdKSA9PiB2b2lkO1xyXG50eXBlIElSZW1vdmVPdmVybGF5TGlzdGVuZXIgPSA8VCBleHRlbmRzIEV2ZW50VHlwZT4oZXZlbnQ6IFQsIGNiOiBFdmVudE1hcFtUXSkgPT4gdm9pZDtcclxuXHJcbnR5cGUgU3Vic2NyaWJlcjxUPiA9IHtcclxuICBba2V5IGluIEV2ZW50VHlwZV0/OiBUW107XHJcbn07XHJcbnR5cGUgRXZlbnRQYXJhbWV0ZXIgPSBQYXJhbWV0ZXJzPEV2ZW50TWFwW0V2ZW50VHlwZV0+WzBdO1xyXG50eXBlIFZvaWRGdW5jPFQ+ID0gKC4uLmFyZ3M6IFRbXSkgPT4gdm9pZDtcclxuXHJcbmxldCBpbml0ZWQgPSBmYWxzZTtcclxuXHJcbmxldCB3c1VybDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XHJcbmxldCB3czogV2ViU29ja2V0IHwgbnVsbCA9IG51bGw7XHJcbmxldCBxdWV1ZTogKFxyXG4gIHwgeyBbczogc3RyaW5nXTogdW5rbm93biB9XHJcbiAgfCBbeyBbczogc3RyaW5nXTogdW5rbm93biB9LCAoKHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB1bmtub3duKSB8IHVuZGVmaW5lZF1cclxuKVtdIHwgbnVsbCA9IFtdO1xyXG5sZXQgcnNlcUNvdW50ZXIgPSAwO1xyXG5jb25zdCByZXNwb25zZVByb21pc2VzOiBSZWNvcmQ8bnVtYmVyLCAodmFsdWU6IHVua25vd24pID0+IHZvaWQ+ID0ge307XHJcblxyXG5jb25zdCBzdWJzY3JpYmVyczogU3Vic2NyaWJlcjxWb2lkRnVuYzx1bmtub3duPj4gPSB7fTtcclxuXHJcbmNvbnN0IHNlbmRNZXNzYWdlID0gKFxyXG4gIG1zZzogeyBbczogc3RyaW5nXTogdW5rbm93biB9LFxyXG4gIGNiPzogKHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB1bmtub3duLFxyXG4pOiB2b2lkID0+IHtcclxuICBpZiAod3MpIHtcclxuICAgIGlmIChxdWV1ZSlcclxuICAgICAgcXVldWUucHVzaChtc2cpO1xyXG4gICAgZWxzZVxyXG4gICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpZiAocXVldWUpXHJcbiAgICAgIHF1ZXVlLnB1c2goW21zZywgY2JdKTtcclxuICAgIGVsc2VcclxuICAgICAgd2luZG93Lk92ZXJsYXlQbHVnaW5BcGkuY2FsbEhhbmRsZXIoSlNPTi5zdHJpbmdpZnkobXNnKSwgY2IpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHByb2Nlc3NFdmVudCA9IDxUIGV4dGVuZHMgRXZlbnRUeXBlPihtc2c6IFBhcmFtZXRlcnM8RXZlbnRNYXBbVF0+WzBdKTogdm9pZCA9PiB7XHJcbiAgaW5pdCgpO1xyXG5cclxuICBjb25zdCBzdWJzID0gc3Vic2NyaWJlcnNbbXNnLnR5cGVdO1xyXG4gIHN1YnM/LmZvckVhY2goKHN1YikgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgc3ViKG1zZyk7XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZGlzcGF0Y2hPdmVybGF5RXZlbnQgPSBwcm9jZXNzRXZlbnQ7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkT3ZlcmxheUxpc3RlbmVyOiBJQWRkT3ZlcmxheUxpc3RlbmVyID0gKGV2ZW50LCBjYik6IHZvaWQgPT4ge1xyXG4gIGluaXQoKTtcclxuXHJcbiAgaWYgKCFzdWJzY3JpYmVyc1tldmVudF0pIHtcclxuICAgIHN1YnNjcmliZXJzW2V2ZW50XSA9IFtdO1xyXG5cclxuICAgIGlmICghcXVldWUpIHtcclxuICAgICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICAgIGNhbGw6ICdzdWJzY3JpYmUnLFxyXG4gICAgICAgIGV2ZW50czogW2V2ZW50XSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzdWJzY3JpYmVyc1tldmVudF0/LnB1c2goY2IgYXMgVm9pZEZ1bmM8dW5rbm93bj4pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZU92ZXJsYXlMaXN0ZW5lcjogSVJlbW92ZU92ZXJsYXlMaXN0ZW5lciA9IChldmVudCwgY2IpOiB2b2lkID0+IHtcclxuICBpbml0KCk7XHJcblxyXG4gIGlmIChzdWJzY3JpYmVyc1tldmVudF0pIHtcclxuICAgIGNvbnN0IGxpc3QgPSBzdWJzY3JpYmVyc1tldmVudF07XHJcbiAgICBjb25zdCBwb3MgPSBsaXN0Py5pbmRleE9mKGNiIGFzIFZvaWRGdW5jPHVua25vd24+KTtcclxuXHJcbiAgICBpZiAocG9zICE9PSB1bmRlZmluZWQgJiYgcG9zID4gLTEpXHJcbiAgICAgIGxpc3Q/LnNwbGljZShwb3MsIDEpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGNhbGxPdmVybGF5SGFuZGxlckludGVybmFsOiBJT3ZlcmxheUhhbmRsZXIgPSAoXHJcbiAgX21zZzogeyBbczogc3RyaW5nXTogdW5rbm93biB9LFxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbik6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgaW5pdCgpO1xyXG5cclxuICBjb25zdCBtc2cgPSB7XHJcbiAgICAuLi5fbXNnLFxyXG4gICAgcnNlcTogMCxcclxuICB9O1xyXG4gIGxldCBwOiBQcm9taXNlPHVua25vd24+O1xyXG5cclxuICBpZiAod3MpIHtcclxuICAgIG1zZy5yc2VxID0gcnNlcUNvdW50ZXIrKztcclxuICAgIHAgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICByZXNwb25zZVByb21pc2VzW21zZy5yc2VxXSA9IHJlc29sdmU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzZW5kTWVzc2FnZShtc2cpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwID0gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcclxuICAgICAgc2VuZE1lc3NhZ2UobXNnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgIHJlc29sdmUoZGF0YSA9PT0gbnVsbCA/IG51bGwgOiBKU09OLnBhcnNlKGRhdGEpKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBwO1xyXG59O1xyXG5cclxudHlwZSBPdmVycmlkZU1hcCA9IHsgW2NhbGwgaW4gT3ZlcmxheUhhbmRsZXJUeXBlc10/OiBPdmVybGF5SGFuZGxlckZ1bmNzW2NhbGxdIH07XHJcbmNvbnN0IGNhbGxPdmVybGF5SGFuZGxlck92ZXJyaWRlTWFwOiBPdmVycmlkZU1hcCA9IHt9O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhbGxPdmVybGF5SGFuZGxlcjogSU92ZXJsYXlIYW5kbGVyID0gKFxyXG4gIF9tc2c6IHsgW3M6IHN0cmluZ106IHVua25vd24gfSxcclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4pOiBQcm9taXNlPGFueT4gPT4ge1xyXG4gIGluaXQoKTtcclxuXHJcbiAgLy8gSWYgdGhpcyBgYXNgIGlzIGluY29ycmVjdCwgdGhlbiBpdCB3aWxsIG5vdCBmaW5kIGFuIG92ZXJyaWRlLlxyXG4gIC8vIFRPRE86IHdlIGNvdWxkIGFsc28gcmVwbGFjZSB0aGlzIHdpdGggYSB0eXBlIGd1YXJkLlxyXG4gIGNvbnN0IHR5cGUgPSBfbXNnLmNhbGwgYXMga2V5b2YgT3ZlcnJpZGVNYXA7XHJcbiAgY29uc3QgY2FsbEZ1bmMgPSBjYWxsT3ZlcmxheUhhbmRsZXJPdmVycmlkZU1hcFt0eXBlXSA/PyBjYWxsT3ZlcmxheUhhbmRsZXJJbnRlcm5hbDtcclxuXHJcbiAgLy8gVGhlIGBJT3ZlcmxheUhhbmRsZXJgIHR5cGUgZ3VhcmFudGVlcyB0aGF0IHBhcmFtZXRlcnMvcmV0dXJuIHR5cGUgbWF0Y2hcclxuICAvLyBvbmUgb2YgdGhlIG92ZXJsYXkgaGFuZGxlcnMuICBUaGUgT3ZlcnJpZGVNYXAgYWxzbyBvbmx5IHN0b3JlcyBmdW5jdGlvbnNcclxuICAvLyB0aGF0IG1hdGNoIGJ5IHRoZSBkaXNjcmltaW5hdGluZyBgY2FsbGAgZmllbGQsIGFuZCBzbyBhbnkgb3ZlcnJpZGVzXHJcbiAgLy8gc2hvdWxkIGJlIGNvcnJlY3QgaGVyZS5cclxuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbWF4LWxlblxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55LEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcclxuICByZXR1cm4gY2FsbEZ1bmMoX21zZyBhcyBhbnkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHNldE92ZXJsYXlIYW5kbGVyT3ZlcnJpZGUgPSA8VCBleHRlbmRzIGtleW9mIE92ZXJsYXlIYW5kbGVyRnVuY3M+KFxyXG4gIHR5cGU6IFQsXHJcbiAgb3ZlcnJpZGU/OiBPdmVybGF5SGFuZGxlckZ1bmNzW1RdLFxyXG4pOiB2b2lkID0+IHtcclxuICBpZiAoIW92ZXJyaWRlKSB7XHJcbiAgICBkZWxldGUgY2FsbE92ZXJsYXlIYW5kbGVyT3ZlcnJpZGVNYXBbdHlwZV07XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG4gIGNhbGxPdmVybGF5SGFuZGxlck92ZXJyaWRlTWFwW3R5cGVdID0gb3ZlcnJpZGU7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdCA9ICgpOiB2b2lkID0+IHtcclxuICBpZiAoaW5pdGVkKVxyXG4gICAgcmV0dXJuO1xyXG5cclxuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgIHdzVXJsID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKS5nZXQoJ09WRVJMQVlfV1MnKTtcclxuICAgIGlmICh3c1VybCAhPT0gbnVsbCkge1xyXG4gICAgICBjb25zdCBjb25uZWN0V3MgPSBmdW5jdGlvbih3c1VybDogc3RyaW5nKSB7XHJcbiAgICAgICAgd3MgPSBuZXcgV2ViU29ja2V0KHdzVXJsKTtcclxuXHJcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZSkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgd3MuYWRkRXZlbnRMaXN0ZW5lcignb3BlbicsICgpID0+IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQhJyk7XHJcblxyXG4gICAgICAgICAgY29uc3QgcSA9IHF1ZXVlID8/IFtdO1xyXG4gICAgICAgICAgcXVldWUgPSBudWxsO1xyXG5cclxuICAgICAgICAgIHNlbmRNZXNzYWdlKHtcclxuICAgICAgICAgICAgY2FsbDogJ3N1YnNjcmliZScsXHJcbiAgICAgICAgICAgIGV2ZW50czogT2JqZWN0LmtleXMoc3Vic2NyaWJlcnMpLFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgZm9yIChjb25zdCBtc2cgb2YgcSkge1xyXG4gICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkobXNnKSlcclxuICAgICAgICAgICAgICBzZW5kTWVzc2FnZShtc2cpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgKF9tc2cpID0+IHtcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX21zZy5kYXRhICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgbWVzc2FnZSBkYXRhIHJlY2VpdmVkOiAnLCBfbXNnKTtcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbXNnID0gSlNPTi5wYXJzZShfbXNnLmRhdGEpIGFzIEV2ZW50UGFyYW1ldGVyICYgeyByc2VxPzogbnVtYmVyIH07XHJcblxyXG4gICAgICAgICAgICBpZiAobXNnLnJzZXEgIT09IHVuZGVmaW5lZCAmJiByZXNwb25zZVByb21pc2VzW21zZy5yc2VxXSkge1xyXG4gICAgICAgICAgICAgIHJlc3BvbnNlUHJvbWlzZXNbbXNnLnJzZXFdPy4obXNnKTtcclxuICAgICAgICAgICAgICBkZWxldGUgcmVzcG9uc2VQcm9taXNlc1ttc2cucnNlcV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgcHJvY2Vzc0V2ZW50KG1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBtZXNzYWdlIHJlY2VpdmVkOiAnLCBfbXNnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdjbG9zZScsICgpID0+IHtcclxuICAgICAgICAgIHF1ZXVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnVHJ5aW5nIHRvIHJlY29ubmVjdC4uLicpO1xyXG4gICAgICAgICAgLy8gRG9uJ3Qgc3BhbSB0aGUgc2VydmVyIHdpdGggcmV0cmllcy5cclxuICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY29ubmVjdFdzKHdzVXJsKTtcclxuICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25uZWN0V3Mod3NVcmwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3Qgd2FpdEZvckFwaSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICghd2luZG93Lk92ZXJsYXlQbHVnaW5BcGkgfHwgIXdpbmRvdy5PdmVybGF5UGx1Z2luQXBpLnJlYWR5KSB7XHJcbiAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dCh3YWl0Rm9yQXBpLCAzMDApO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcSA9IHF1ZXVlID8/IFtdO1xyXG4gICAgICAgIHF1ZXVlID0gbnVsbDtcclxuXHJcbiAgICAgICAgd2luZG93Ll9fT3ZlcmxheUNhbGxiYWNrID0gcHJvY2Vzc0V2ZW50O1xyXG5cclxuICAgICAgICBzZW5kTWVzc2FnZSh7XHJcbiAgICAgICAgICBjYWxsOiAnc3Vic2NyaWJlJyxcclxuICAgICAgICAgIGV2ZW50czogT2JqZWN0LmtleXMoc3Vic2NyaWJlcnMpLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcSkge1xyXG4gICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkpXHJcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlKGl0ZW1bMF0sIGl0ZW1bMV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuXHJcbiAgICAgIHdhaXRGb3JBcGkoKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBIZXJlIHRoZSBPdmVybGF5UGx1Z2luIEFQSSBpcyByZWdpc3RlcmVkIHRvIHRoZSB3aW5kb3cgb2JqZWN0LFxyXG4gICAgLy8gYnV0IHRoaXMgaXMgbWFpbmx5IGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5Gb3IgY2FjdGJvdCdzIGJ1aWx0LWluIGZpbGVzLFxyXG4gICAgLy8gaXQgaXMgcmVjb21tZW5kZWQgdG8gdXNlIHRoZSB2YXJpb3VzIGZ1bmN0aW9ucyBleHBvcnRlZCBpbiByZXNvdXJjZXMvb3ZlcmxheV9wbHVnaW5fYXBpLnRzLlxyXG4gICAgd2luZG93LmFkZE92ZXJsYXlMaXN0ZW5lciA9IGFkZE92ZXJsYXlMaXN0ZW5lcjtcclxuICAgIHdpbmRvdy5yZW1vdmVPdmVybGF5TGlzdGVuZXIgPSByZW1vdmVPdmVybGF5TGlzdGVuZXI7XHJcbiAgICB3aW5kb3cuY2FsbE92ZXJsYXlIYW5kbGVyID0gY2FsbE92ZXJsYXlIYW5kbGVyO1xyXG4gICAgd2luZG93LmRpc3BhdGNoT3ZlcmxheUV2ZW50ID0gZGlzcGF0Y2hPdmVybGF5RXZlbnQ7XHJcbiAgfVxyXG5cclxuICBpbml0ZWQgPSB0cnVlO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBhZGRPdmVybGF5TGlzdGVuZXIsIGNhbGxPdmVybGF5SGFuZGxlciB9IGZyb20gJy4uLy4uL3Jlc291cmNlcy9vdmVybGF5X3BsdWdpbl9hcGknO1xyXG5cclxuaW1wb3J0ICcuLi8uLi9yZXNvdXJjZXMvZGVmYXVsdHMuY3NzJztcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignQ2hhbmdlWm9uZScsIChlKSA9PiB7XHJcbiAgY29uc3QgY3VycmVudFpvbmUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudFpvbmUnKTtcclxuICBpZiAoY3VycmVudFpvbmUpXHJcbiAgICBjdXJyZW50Wm9uZS5pbm5lclRleHQgPSBgY3VycmVudFpvbmU6ICR7ZS56b25lTmFtZX0gKCR7ZS56b25lSUR9KWA7XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdvbkluQ29tYmF0Q2hhbmdlZEV2ZW50JywgKGUpID0+IHtcclxuICBjb25zdCBpbkNvbWJhdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbkNvbWJhdCcpO1xyXG4gIGlmIChpbkNvbWJhdCkge1xyXG4gICAgaW5Db21iYXQuaW5uZXJUZXh0ID0gYGluQ29tYmF0OiBhY3Q6ICR7XHJcbiAgICAgIGUuZGV0YWlsLmluQUNUQ29tYmF0ID8gJ3llcycgOiAnbm8nXHJcbiAgICB9IGdhbWU6ICR7KGUuZGV0YWlsLmluR2FtZUNvbWJhdCA/ICd5ZXMnIDogJ25vJyl9YDtcclxuICB9XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdvblBsYXllckNoYW5nZWRFdmVudCcsIChlKSA9PiB7XHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJyk7XHJcbiAgaWYgKG5hbWUpXHJcbiAgICBuYW1lLmlubmVyVGV4dCA9IGUuZGV0YWlsLm5hbWU7XHJcbiAgY29uc3QgcGxheWVySWQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGxheWVySWQnKTtcclxuICBpZiAocGxheWVySWQpXHJcbiAgICBwbGF5ZXJJZC5pbm5lclRleHQgPSBlLmRldGFpbC5pZC50b1N0cmluZygxNik7XHJcbiAgY29uc3QgaHAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaHAnKTtcclxuICBpZiAoaHApXHJcbiAgICBocC5pbm5lclRleHQgPSBgJHtlLmRldGFpbC5jdXJyZW50SFB9LyR7ZS5kZXRhaWwubWF4SFB9ICgke2UuZGV0YWlsLmN1cnJlbnRTaGllbGR9KWA7XHJcbiAgY29uc3QgbXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXAnKTtcclxuICBpZiAobXApXHJcbiAgICBtcC5pbm5lclRleHQgPSBgJHtlLmRldGFpbC5jdXJyZW50TVB9LyR7ZS5kZXRhaWwubWF4TVB9YDtcclxuICBjb25zdCBjcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjcCcpO1xyXG4gIGlmIChjcClcclxuICAgIGNwLmlubmVyVGV4dCA9IGAke2UuZGV0YWlsLmN1cnJlbnRDUH0vJHtlLmRldGFpbC5tYXhDUH1gO1xyXG4gIGNvbnN0IGdwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2dwJyk7XHJcbiAgaWYgKGdwKVxyXG4gICAgZ3AuaW5uZXJUZXh0ID0gYCR7ZS5kZXRhaWwuY3VycmVudEdQfS8ke2UuZGV0YWlsLm1heEdQfWA7XHJcbiAgY29uc3Qgam9iID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2pvYicpO1xyXG4gIGlmIChqb2IpXHJcbiAgICBqb2IuaW5uZXJUZXh0ID0gYCR7ZS5kZXRhaWwubGV2ZWx9ICR7ZS5kZXRhaWwuam9ifWA7XHJcbiAgY29uc3QgZGVidWcgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGVidWcnKTtcclxuICBpZiAoZGVidWcpXHJcbiAgICBkZWJ1Zy5pbm5lclRleHQgPSBlLmRldGFpbC5kZWJ1Z0pvYjtcclxuXHJcbiAgY29uc3Qgam9iSW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqb2JpbmZvJyk7XHJcbiAgaWYgKGpvYkluZm8pIHtcclxuICAgIGNvbnN0IGRldGFpbCA9IGUuZGV0YWlsO1xyXG4gICAgaWYgKGRldGFpbC5qb2IgPT09ICdSRE0nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBgJHtkZXRhaWwuam9iRGV0YWlsLndoaXRlTWFuYX0gfCAke2RldGFpbC5qb2JEZXRhaWwuYmxhY2tNYW5hfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdXQVInICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBkZXRhaWwuam9iRGV0YWlsLmJlYXN0LnRvU3RyaW5nKCk7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdEUksnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwuYmxvb2R9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmRhcmtzaWRlTWlsbGlzZWNvbmRzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5kYXJrQXJ0cy50b1N0cmluZygpfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5saXZpbmdTaGFkb3dNaWxsaXNlY29uZHN9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0dOQicgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGAke2RldGFpbC5qb2JEZXRhaWwuY2FydHJpZGdlc30ke2RldGFpbC5qb2JEZXRhaWwuY29udGludWF0aW9uU3RhdGV9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ1BMRCcgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGRldGFpbC5qb2JEZXRhaWwub2F0aC50b1N0cmluZygpO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnQlJEJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLnNvbmdOYW1lfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5zb25nUHJvY3N9IHwgJHtkZXRhaWwuam9iRGV0YWlsLnNvdWxHYXVnZX0gfCAke2RldGFpbC5qb2JEZXRhaWwuc29uZ01pbGxpc2Vjb25kc31gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnRE5DJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gYCR7ZGV0YWlsLmpvYkRldGFpbC5mZWF0aGVyc30gfCAke2RldGFpbC5qb2JEZXRhaWwuZXNwcml0fSB8IFske1xyXG4gICAgICAgIGRldGFpbC5qb2JEZXRhaWwuc3RlcHMuam9pbignLCAnKVxyXG4gICAgICB9XSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5jdXJyZW50U3RlcH1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnTklOJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gYCR7ZGV0YWlsLmpvYkRldGFpbC5odXRvbk1pbGxpc2Vjb25kc30gfCAke2RldGFpbC5qb2JEZXRhaWwubmlua2lBbW91bnR9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0RSRycgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5ibG9vZE1pbGxpc2Vjb25kc30gfCAke2RldGFpbC5qb2JEZXRhaWwubGlmZU1pbGxpc2Vjb25kc30gfCAke2RldGFpbC5qb2JEZXRhaWwuZXllc0Ftb3VudH1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnQkxNJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLnVtYnJhbFN0YWNrc30gKCR7ZGV0YWlsLmpvYkRldGFpbC51bWJyYWxNaWxsaXNlY29uZHN9KSB8ICR7ZGV0YWlsLmpvYkRldGFpbC51bWJyYWxIZWFydHN9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmZvdWxDb3VudH0gJHtkZXRhaWwuam9iRGV0YWlsLmVub2NoaWFuLnRvU3RyaW5nKCl9ICgke2RldGFpbC5qb2JEZXRhaWwubmV4dFBvbHlnbG90TWlsbGlzZWNvbmRzfSlgO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnVEhNJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLnVtYnJhbFN0YWNrc30gKCR7ZGV0YWlsLmpvYkRldGFpbC51bWJyYWxNaWxsaXNlY29uZHN9KWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdXSE0nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwubGlseVN0YWNrc30gKCR7ZGV0YWlsLmpvYkRldGFpbC5saWx5TWlsbGlzZWNvbmRzfSkgfCAke2RldGFpbC5qb2JEZXRhaWwuYmxvb2RsaWx5U3RhY2tzfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdTTU4nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwuYWV0aGVyZmxvd1N0YWNrc30gfCAke2RldGFpbC5qb2JEZXRhaWwuZHJlYWR3eXJtU3RhY2tzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5iYWhhbXV0U3RhbmNlfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5iYWhhbXV0U3VtbW9uZWR9ICgke2RldGFpbC5qb2JEZXRhaWwuc3RhbmNlTWlsbGlzZWNvbmRzfSkgfCAke2RldGFpbC5qb2JEZXRhaWwucGhvZW5peFJlYWR5fWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdTQ0gnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwuYWV0aGVyZmxvd1N0YWNrc30gfCAke2RldGFpbC5qb2JEZXRhaWwuZmFpcnlHYXVnZX0gfCAke2RldGFpbC5qb2JEZXRhaWwuZmFpcnlTdGF0dXN9ICgke2RldGFpbC5qb2JEZXRhaWwuZmFpcnlNaWxsaXNlY29uZHN9KWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdBQ04nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBkZXRhaWwuam9iRGV0YWlsLmFldGhlcmZsb3dTdGFja3MudG9TdHJpbmcoKTtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0FTVCcgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGAke2RldGFpbC5qb2JEZXRhaWwuaGVsZENhcmR9IFske2RldGFpbC5qb2JEZXRhaWwuYXJjYW51bXMuam9pbignLCAnKX1dYDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ01OSycgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGAke2RldGFpbC5qb2JEZXRhaWwuY2hha3JhU3RhY2tzfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdNQ0gnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwuaGVhdH0gKCR7ZGV0YWlsLmpvYkRldGFpbC5vdmVyaGVhdE1pbGxpc2Vjb25kc30pIHwgJHtkZXRhaWwuam9iRGV0YWlsLmJhdHRlcnl9ICgke2RldGFpbC5qb2JEZXRhaWwuYmF0dGVyeU1pbGxpc2Vjb25kc30pIHwgbGFzdDogJHtkZXRhaWwuam9iRGV0YWlsLmxhc3RCYXR0ZXJ5QW1vdW50fSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5vdmVyaGVhdEFjdGl2ZS50b1N0cmluZygpfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5yb2JvdEFjdGl2ZS50b1N0cmluZygpfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdTQU0nICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwua2Vua2l9IHwgJHtkZXRhaWwuam9iRGV0YWlsLm1lZGl0YXRpb25TdGFja3N9KCR7ZGV0YWlsLmpvYkRldGFpbC5zZXRzdS50b1N0cmluZygpfSwke2RldGFpbC5qb2JEZXRhaWwuZ2V0c3UudG9TdHJpbmcoKX0sJHtkZXRhaWwuam9iRGV0YWlsLmthLnRvU3RyaW5nKCl9KWA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9ICcnO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgY29uc3QgcG9zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BvcycpO1xyXG4gIGlmIChwb3MpIHtcclxuICAgIHBvcy5pbm5lclRleHQgPSBgJHtlLmRldGFpbC5wb3MueC50b0ZpeGVkKDIpfSwke2UuZGV0YWlsLnBvcy55LnRvRml4ZWQoMil9LCR7XHJcbiAgICAgIGUuZGV0YWlsLnBvcy56LnRvRml4ZWQoMilcclxuICAgIH1gO1xyXG4gIH1cclxuICBjb25zdCByb3RhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyb3RhdGlvbicpO1xyXG4gIGlmIChyb3RhdGlvbilcclxuICAgIHJvdGF0aW9uLmlubmVyVGV4dCA9IGUuZGV0YWlsLnJvdGF0aW9uLnRvU3RyaW5nKCk7XHJcbiAgY29uc3QgYmFpdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYWl0Jyk7XHJcbiAgaWYgKGJhaXQpXHJcbiAgICBiYWl0LmlubmVyVGV4dCA9IGUuZGV0YWlsLmJhaXQudG9TdHJpbmcoKTtcclxufSk7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ0VubWl0eVRhcmdldERhdGEnLCAoZSkgPT4ge1xyXG4gIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0YXJnZXQnKTtcclxuICBpZiAodGFyZ2V0KVxyXG4gICAgdGFyZ2V0LmlubmVyVGV4dCA9IGUuVGFyZ2V0ID8gZS5UYXJnZXQuTmFtZSA6ICctLSc7XHJcbiAgY29uc3QgdGlkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RpZCcpO1xyXG4gIGlmICh0aWQpXHJcbiAgICB0aWQuaW5uZXJUZXh0ID0gZS5UYXJnZXQgPyBlLlRhcmdldC5JRC50b1N0cmluZygxNikgOiAnJztcclxuICBjb25zdCB0ZGlzdGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGRpc3RhbmNlJyk7XHJcbiAgaWYgKHRkaXN0YW5jZSlcclxuICAgIHRkaXN0YW5jZS5pbm5lclRleHQgPSBlLlRhcmdldCA/IGUuVGFyZ2V0LkRpc3RhbmNlLnRvU3RyaW5nKCkgOiAnJztcclxufSk7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ29uR2FtZUV4aXN0c0V2ZW50JywgKF9lKSA9PiB7XHJcbiAgLy8gY29uc29sZS5sb2coXCJHYW1lIGV4aXN0czogXCIgKyBlLmRldGFpbC5leGlzdHMpO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25HYW1lQWN0aXZlQ2hhbmdlZEV2ZW50JywgKF9lKSA9PiB7XHJcbiAgLy8gY29uc29sZS5sb2coXCJHYW1lIGFjdGl2ZTogXCIgKyBlLmRldGFpbC5hY3RpdmUpO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25Mb2dFdmVudCcsIChlKSA9PiB7XHJcbiAgZS5kZXRhaWwubG9ncy5mb3JFYWNoKChsb2cpID0+IHtcclxuICAgIC8vIE1hdGNoIFwiL2VjaG8gdHRzOjxzdHVmZj5cIlxyXG4gICAgY29uc3QgciA9IC8wMDowMDM4OnR0czooLiopLy5leGVjKGxvZyk7XHJcbiAgICBpZiAociAmJiByWzFdKSB7XHJcbiAgICAgIHZvaWQgY2FsbE92ZXJsYXlIYW5kbGVyKHtcclxuICAgICAgICBjYWxsOiAnY2FjdGJvdFNheScsXHJcbiAgICAgICAgdGV4dDogclsxXSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdvblVzZXJGaWxlQ2hhbmdlZCcsIChlKSA9PiB7XHJcbiAgY29uc29sZS5sb2coYFVzZXIgZmlsZSAke2UuZmlsZX0gY2hhbmdlZCFgKTtcclxufSk7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ0ZpbGVDaGFuZ2VkJywgKGUpID0+IHtcclxuICBjb25zb2xlLmxvZyhgRmlsZSAke2UuZmlsZX0gY2hhbmdlZCFgKTtcclxufSk7XHJcblxyXG52b2lkIGNhbGxPdmVybGF5SGFuZGxlcih7IGNhbGw6ICdjYWN0Ym90UmVxdWVzdFN0YXRlJyB9KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==