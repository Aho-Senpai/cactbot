/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
var __webpack_exports__ = {};

;// CONCATENATED MODULE: ./resources/overlay_plugin_api.ts
// OverlayPlugin API setup
let inited = false;
let wsUrl = null;
let ws = null;
let queue = [];
let rseqCounter = 0;
const responsePromises = {};
const subscribers = {};

const sendMessage = (msg, cb) => {
  if (ws) {
    if (queue) queue.push(msg);else ws.send(JSON.stringify(msg));
  } else {
    if (queue) queue.push([msg, cb]);else window.OverlayPluginApi.callHandler(JSON.stringify(msg), cb);
  }
};

const processEvent = msg => {
  init();
  const subs = subscribers[msg.type];
  subs === null || subs === void 0 ? void 0 : subs.forEach(sub => sub(msg));
};

const dispatchOverlayEvent = processEvent;
const addOverlayListener = (event, cb) => {
  var _subscribers$event;

  init();

  if (!subscribers[event]) {
    subscribers[event] = [];

    if (!queue) {
      sendMessage({
        call: 'subscribe',
        events: [event]
      });
    }
  }

  (_subscribers$event = subscribers[event]) === null || _subscribers$event === void 0 ? void 0 : _subscribers$event.push(cb);
};
const removeOverlayListener = (event, cb) => {
  init();

  if (subscribers[event]) {
    const list = subscribers[event];
    const pos = list === null || list === void 0 ? void 0 : list.indexOf(cb);
    if (pos && pos > -1) list === null || list === void 0 ? void 0 : list.splice(pos, 1);
  }
};

const callOverlayHandlerInternal = _msg => {
  init();
  const msg = { ..._msg,
    rseq: 0
  };
  let p;

  if (ws) {
    msg.rseq = rseqCounter++;
    p = new Promise(resolve => {
      responsePromises[msg.rseq] = resolve;
    });
    sendMessage(msg);
  } else {
    p = new Promise(resolve => {
      sendMessage(msg, data => {
        resolve(data === null ? null : JSON.parse(data));
      });
    });
  }

  return p;
};

const callOverlayHandlerOverrideMap = {};
const callOverlayHandler = _msg => {
  var _callOverlayHandlerOv;

  init(); // If this `as` is incorrect, then it will not find an override.
  // TODO: we could also replace this with a type guard.

  const type = _msg.call;
  const callFunc = (_callOverlayHandlerOv = callOverlayHandlerOverrideMap[type]) !== null && _callOverlayHandlerOv !== void 0 ? _callOverlayHandlerOv : callOverlayHandlerInternal; // The `IOverlayHandler` type guarantees that parameters/return type match
  // one of the overlay handlers.  The OverrideMap also only stores functions
  // that match by the discriminating `call` field, and so any overrides
  // should be correct here.
  // eslint-disable-next-line max-len
  // eslint-disable-next-line @typescript-eslint/no-explicit-any,@typescript-eslint/no-unsafe-argument

  return callFunc(_msg);
};
const setOverlayHandlerOverride = (type, override) => {
  if (!override) {
    delete callOverlayHandlerOverrideMap[type];
    return;
  }

  callOverlayHandlerOverrideMap[type] = override;
};
const init = () => {
  if (inited) return;

  if (typeof window !== 'undefined') {
    wsUrl = /[\?&]OVERLAY_WS=([^&]+)/.exec(window.location.href);

    if (wsUrl) {
      const connectWs = function () {
        var _wsUrl;

        ws = new WebSocket((_wsUrl = wsUrl) === null || _wsUrl === void 0 ? void 0 : _wsUrl[1]);
        ws.addEventListener('error', e => {
          console.error(e);
        });
        ws.addEventListener('open', () => {
          var _queue;

          console.log('Connected!');
          const q = (_queue = queue) !== null && _queue !== void 0 ? _queue : [];
          queue = null;
          sendMessage({
            call: 'subscribe',
            events: Object.keys(subscribers)
          });

          for (const msg of q) {
            if (!Array.isArray(msg)) sendMessage(msg);
          }
        });
        ws.addEventListener('message', _msg => {
          try {
            if (typeof _msg.data !== 'string') {
              console.error('Invalid message data received: ', _msg);
              return;
            }

            const msg = JSON.parse(_msg.data);

            if (msg.rseq !== undefined && responsePromises[msg.rseq]) {
              var _responsePromises$msg;

              (_responsePromises$msg = responsePromises[msg.rseq]) === null || _responsePromises$msg === void 0 ? void 0 : _responsePromises$msg.call(responsePromises, msg);
              delete responsePromises[msg.rseq];
            } else {
              processEvent(msg);
            }
          } catch (e) {
            console.error('Invalid message received: ', _msg);
            return;
          }
        });
        ws.addEventListener('close', () => {
          queue = null;
          console.log('Trying to reconnect...'); // Don't spam the server with retries.

          window.setTimeout(() => {
            connectWs();
          }, 300);
        });
      };

      connectWs();
    } else {
      const waitForApi = function () {
        var _queue2;

        if (!window.OverlayPluginApi || !window.OverlayPluginApi.ready) {
          window.setTimeout(waitForApi, 300);
          return;
        }

        const q = (_queue2 = queue) !== null && _queue2 !== void 0 ? _queue2 : [];
        queue = null;
        window.__OverlayCallback = processEvent;
        sendMessage({
          call: 'subscribe',
          events: Object.keys(subscribers)
        });

        for (const item of q) {
          if (Array.isArray(item)) sendMessage(item[0], item[1]);
        }
      };

      waitForApi();
    } // Here the OverlayPlugin API is registered to the window object,
    // but this is mainly for backwards compatibility.For cactbot's built-in files,
    // it is recommended to use the various functions exported in resources/overlay_plugin_api.ts.


    window.addOverlayListener = addOverlayListener;
    window.removeOverlayListener = removeOverlayListener;
    window.callOverlayHandler = callOverlayHandler;
    window.dispatchOverlayEvent = dispatchOverlayEvent;
  }

  inited = true;
};
;// CONCATENATED MODULE: ./ui/test/test.ts


addOverlayListener('ChangeZone', e => {
  const currentZone = document.getElementById('currentZone');
  if (currentZone) currentZone.innerText = `currentZone: ${e.zoneName} (${e.zoneID})`;
});
addOverlayListener('onInCombatChangedEvent', e => {
  const inCombat = document.getElementById('inCombat');

  if (inCombat) {
    inCombat.innerText = `inCombat: act: ${e.detail.inACTCombat ? 'yes' : 'no'} game: ${e.detail.inGameCombat ? 'yes' : 'no'}`;
  }
});
addOverlayListener('onPlayerChangedEvent', e => {
  const hp = document.getElementById('hp');
  if (hp) hp.innerText = `${e.detail.currentHP}/${e.detail.maxHP} (${e.detail.currentShield})`;
  const mp = document.getElementById('mp');
  if (mp) mp.innerText = `${e.detail.currentMP}/${e.detail.maxMP}`;
  const cp = document.getElementById('cp');
  if (cp) cp.innerText = `${e.detail.currentCP}/${e.detail.maxCP}`;
  const gp = document.getElementById('gp');
  if (gp) gp.innerText = `${e.detail.currentGP}/${e.detail.maxGP}`;
  const job = document.getElementById('job');
  if (job) job.innerText = `${e.detail.level} ${e.detail.job}`;
  const debug = document.getElementById('debug');
  if (debug) debug.innerText = e.detail.debugJob;
  const jobInfo = document.getElementById('jobinfo');

  if (jobInfo) {
    const detail = e.detail;

    if (detail.job === 'RDM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.whiteMana} | ${detail.jobDetail.blackMana}`;
    } else if (detail.job === 'WAR' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.beast.toString();
    } else if (detail.job === 'DRK' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.blood} | ${detail.jobDetail.darksideMilliseconds} | ${detail.jobDetail.darkArts.toString()} | ${detail.jobDetail.livingShadowMilliseconds}`;
    } else if (detail.job === 'GNB' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.cartridges}${detail.jobDetail.continuationState}`;
    } else if (detail.job === 'PLD' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.oath.toString();
    } else if (detail.job === 'BRD' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.songName} | ${detail.jobDetail.songProcs} | ${detail.jobDetail.soulGauge} | ${detail.jobDetail.songMilliseconds}`;
    } else if (detail.job === 'DNC' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.feathers} | ${detail.jobDetail.esprit} | [${detail.jobDetail.steps.join(', ')}] | ${detail.jobDetail.currentStep}`;
    } else if (detail.job === 'NIN' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.hutonMilliseconds} | ${detail.jobDetail.ninkiAmount}`;
    } else if (detail.job === 'DRG' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.bloodMilliseconds} | ${detail.jobDetail.lifeMilliseconds} | ${detail.jobDetail.eyesAmount}`;
    } else if (detail.job === 'BLM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.umbralStacks} (${detail.jobDetail.umbralMilliseconds}) | ${detail.jobDetail.umbralHearts} | ${detail.jobDetail.foulCount} ${detail.jobDetail.enochian.toString()} (${detail.jobDetail.nextPolyglotMilliseconds})`;
    } else if (detail.job === 'THM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.umbralStacks} (${detail.jobDetail.umbralMilliseconds})`;
    } else if (detail.job === 'WHM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.lilyStacks} (${detail.jobDetail.lilyMilliseconds}) | ${detail.jobDetail.bloodlilyStacks}`;
    } else if (detail.job === 'SMN' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.aetherflowStacks} | ${detail.jobDetail.dreadwyrmStacks} | ${detail.jobDetail.bahamutStance} | ${detail.jobDetail.bahamutSummoned} (${detail.jobDetail.stanceMilliseconds}) | ${detail.jobDetail.phoenixReady}`;
    } else if (detail.job === 'SCH' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.aetherflowStacks} | ${detail.jobDetail.fairyGauge} | ${detail.jobDetail.fairyStatus} (${detail.jobDetail.fairyMilliseconds})`;
    } else if (detail.job === 'ACN' && detail.jobDetail) {
      jobInfo.innerText = detail.jobDetail.aetherflowStacks.toString();
    } else if (detail.job === 'AST' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.heldCard} [${detail.jobDetail.arcanums.join(', ')}]`;
    } else if (detail.job === 'MNK' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.chakraStacks}`;
    } else if (detail.job === 'MCH' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.heat} (${detail.jobDetail.overheatMilliseconds}) | ${detail.jobDetail.battery} (${detail.jobDetail.batteryMilliseconds}) | last: ${detail.jobDetail.lastBatteryAmount} | ${detail.jobDetail.overheatActive.toString()} | ${detail.jobDetail.robotActive.toString()}`;
    } else if (detail.job === 'SAM' && detail.jobDetail) {
      jobInfo.innerText = `${detail.jobDetail.kenki} | ${detail.jobDetail.meditationStacks}(${detail.jobDetail.setsu.toString()},${detail.jobDetail.getsu.toString()},${detail.jobDetail.ka.toString()})`;
    } else {
      jobInfo.innerText = '';
    }
  }

  const pos = document.getElementById('pos');

  if (pos) {
    pos.innerText = `${e.detail.pos.x.toFixed(2)},${e.detail.pos.y.toFixed(2)},${e.detail.pos.z.toFixed(2)}`;
  }

  const rotation = document.getElementById('rotation');
  if (rotation) rotation.innerText = e.detail.rotation.toString();
  const bait = document.getElementById('bait');
  if (bait) bait.innerText = e.detail.bait.toString();
});
addOverlayListener('EnmityTargetData', e => {
  const target = document.getElementById('target');
  if (target) target.innerText = e.Target ? e.Target.Name : '--';
  const tid = document.getElementById('tid');
  if (tid) tid.innerText = e.Target ? e.Target.ID.toString(16) : '';
  const tdistance = document.getElementById('tdistance');
  if (tdistance) tdistance.innerText = e.Target ? e.Target.Distance.toString() : '';
});
addOverlayListener('onGameExistsEvent', _e => {// console.log("Game exists: " + e.detail.exists);
});
addOverlayListener('onGameActiveChangedEvent', _e => {// console.log("Game active: " + e.detail.active);
});
addOverlayListener('onLogEvent', e => {
  e.detail.logs.forEach(log => {
    // Match "/echo tts:<stuff>"
    const r = /00:0038:tts:(.*)/.exec(log);

    if (r && r[1]) {
      void callOverlayHandler({
        call: 'cactbotSay',
        text: r[1]
      });
    }
  });
});
addOverlayListener('onUserFileChanged', e => {
  console.log(`User file ${e.file} changed!`);
});
addOverlayListener('FileChanged', e => {
  console.log(`File ${e.file} changed!`);
});
void callOverlayHandler({
  call: 'cactbotRequestState'
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYWN0Ym90Ly4vcmVzb3VyY2VzL292ZXJsYXlfcGx1Z2luX2FwaS50cyIsIndlYnBhY2s6Ly9jYWN0Ym90Ly4vdWkvdGVzdC90ZXN0LnRzIl0sIm5hbWVzIjpbImluaXRlZCIsIndzVXJsIiwid3MiLCJxdWV1ZSIsInJzZXFDb3VudGVyIiwicmVzcG9uc2VQcm9taXNlcyIsInN1YnNjcmliZXJzIiwic2VuZE1lc3NhZ2UiLCJtc2ciLCJjYiIsInB1c2giLCJzZW5kIiwiSlNPTiIsInN0cmluZ2lmeSIsIndpbmRvdyIsIk92ZXJsYXlQbHVnaW5BcGkiLCJjYWxsSGFuZGxlciIsInByb2Nlc3NFdmVudCIsImluaXQiLCJzdWJzIiwidHlwZSIsImZvckVhY2giLCJzdWIiLCJkaXNwYXRjaE92ZXJsYXlFdmVudCIsImFkZE92ZXJsYXlMaXN0ZW5lciIsImV2ZW50IiwiY2FsbCIsImV2ZW50cyIsInJlbW92ZU92ZXJsYXlMaXN0ZW5lciIsImxpc3QiLCJwb3MiLCJpbmRleE9mIiwic3BsaWNlIiwiY2FsbE92ZXJsYXlIYW5kbGVySW50ZXJuYWwiLCJfbXNnIiwicnNlcSIsInAiLCJQcm9taXNlIiwicmVzb2x2ZSIsImRhdGEiLCJwYXJzZSIsImNhbGxPdmVybGF5SGFuZGxlck92ZXJyaWRlTWFwIiwiY2FsbE92ZXJsYXlIYW5kbGVyIiwiY2FsbEZ1bmMiLCJzZXRPdmVybGF5SGFuZGxlck92ZXJyaWRlIiwib3ZlcnJpZGUiLCJleGVjIiwibG9jYXRpb24iLCJocmVmIiwiY29ubmVjdFdzIiwiV2ViU29ja2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2ciLCJxIiwiT2JqZWN0Iiwia2V5cyIsIkFycmF5IiwiaXNBcnJheSIsInVuZGVmaW5lZCIsInNldFRpbWVvdXQiLCJ3YWl0Rm9yQXBpIiwicmVhZHkiLCJfX092ZXJsYXlDYWxsYmFjayIsIml0ZW0iLCJjdXJyZW50Wm9uZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lclRleHQiLCJ6b25lTmFtZSIsInpvbmVJRCIsImluQ29tYmF0IiwiZGV0YWlsIiwiaW5BQ1RDb21iYXQiLCJpbkdhbWVDb21iYXQiLCJocCIsImN1cnJlbnRIUCIsIm1heEhQIiwiY3VycmVudFNoaWVsZCIsIm1wIiwiY3VycmVudE1QIiwibWF4TVAiLCJjcCIsImN1cnJlbnRDUCIsIm1heENQIiwiZ3AiLCJjdXJyZW50R1AiLCJtYXhHUCIsImpvYiIsImxldmVsIiwiZGVidWciLCJkZWJ1Z0pvYiIsImpvYkluZm8iLCJqb2JEZXRhaWwiLCJ3aGl0ZU1hbmEiLCJibGFja01hbmEiLCJiZWFzdCIsInRvU3RyaW5nIiwiYmxvb2QiLCJkYXJrc2lkZU1pbGxpc2Vjb25kcyIsImRhcmtBcnRzIiwibGl2aW5nU2hhZG93TWlsbGlzZWNvbmRzIiwiY2FydHJpZGdlcyIsImNvbnRpbnVhdGlvblN0YXRlIiwib2F0aCIsInNvbmdOYW1lIiwic29uZ1Byb2NzIiwic291bEdhdWdlIiwic29uZ01pbGxpc2Vjb25kcyIsImZlYXRoZXJzIiwiZXNwcml0Iiwic3RlcHMiLCJqb2luIiwiY3VycmVudFN0ZXAiLCJodXRvbk1pbGxpc2Vjb25kcyIsIm5pbmtpQW1vdW50IiwiYmxvb2RNaWxsaXNlY29uZHMiLCJsaWZlTWlsbGlzZWNvbmRzIiwiZXllc0Ftb3VudCIsInVtYnJhbFN0YWNrcyIsInVtYnJhbE1pbGxpc2Vjb25kcyIsInVtYnJhbEhlYXJ0cyIsImZvdWxDb3VudCIsImVub2NoaWFuIiwibmV4dFBvbHlnbG90TWlsbGlzZWNvbmRzIiwibGlseVN0YWNrcyIsImxpbHlNaWxsaXNlY29uZHMiLCJibG9vZGxpbHlTdGFja3MiLCJhZXRoZXJmbG93U3RhY2tzIiwiZHJlYWR3eXJtU3RhY2tzIiwiYmFoYW11dFN0YW5jZSIsImJhaGFtdXRTdW1tb25lZCIsInN0YW5jZU1pbGxpc2Vjb25kcyIsInBob2VuaXhSZWFkeSIsImZhaXJ5R2F1Z2UiLCJmYWlyeVN0YXR1cyIsImZhaXJ5TWlsbGlzZWNvbmRzIiwiaGVsZENhcmQiLCJhcmNhbnVtcyIsImNoYWtyYVN0YWNrcyIsImhlYXQiLCJvdmVyaGVhdE1pbGxpc2Vjb25kcyIsImJhdHRlcnkiLCJiYXR0ZXJ5TWlsbGlzZWNvbmRzIiwibGFzdEJhdHRlcnlBbW91bnQiLCJvdmVyaGVhdEFjdGl2ZSIsInJvYm90QWN0aXZlIiwia2Vua2kiLCJtZWRpdGF0aW9uU3RhY2tzIiwic2V0c3UiLCJnZXRzdSIsImthIiwieCIsInRvRml4ZWQiLCJ5IiwieiIsInJvdGF0aW9uIiwiYmFpdCIsInRhcmdldCIsIlRhcmdldCIsIk5hbWUiLCJ0aWQiLCJJRCIsInRkaXN0YW5jZSIsIkRpc3RhbmNlIiwiX2UiLCJsb2dzIiwiciIsInRleHQiLCJmaWxlIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBc0RBLElBQUlBLE1BQU0sR0FBRyxLQUFiO0FBRUEsSUFBSUMsS0FBNkIsR0FBRyxJQUFwQztBQUNBLElBQUlDLEVBQW9CLEdBQUcsSUFBM0I7QUFDQSxJQUFJQyxLQUdNLEdBQUcsRUFIYjtBQUlBLElBQUlDLFdBQVcsR0FBRyxDQUFsQjtBQUNBLE1BQU1DLGdCQUEwRCxHQUFHLEVBQW5FO0FBRUEsTUFBTUMsV0FBMEMsR0FBRyxFQUFuRDs7QUFFQSxNQUFNQyxXQUFXLEdBQUcsQ0FDbEJDLEdBRGtCLEVBRWxCQyxFQUZrQixLQUdUO0FBQ1QsTUFBSVAsRUFBSixFQUFRO0FBQ04sUUFBSUMsS0FBSixFQUNFQSxLQUFLLENBQUNPLElBQU4sQ0FBV0YsR0FBWCxFQURGLEtBR0VOLEVBQUUsQ0FBQ1MsSUFBSCxDQUFRQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUwsR0FBZixDQUFSO0FBQ0gsR0FMRCxNQUtPO0FBQ0wsUUFBSUwsS0FBSixFQUNFQSxLQUFLLENBQUNPLElBQU4sQ0FBVyxDQUFDRixHQUFELEVBQU1DLEVBQU4sQ0FBWCxFQURGLEtBR0VLLE1BQU0sQ0FBQ0MsZ0JBQVAsQ0FBd0JDLFdBQXhCLENBQW9DSixJQUFJLENBQUNDLFNBQUwsQ0FBZUwsR0FB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VixFQUFlO0FBQ2IsV0FBSy9ILGtCQUFrQixDQUFDO0FBQ3RCaEIsWUFBSSxFQUFFLFlBRGdCO0FBRXRCZ0osWUFBSSxFQUFFRCxDQUFDLENBQUMsQ0FBRDtBQUZlLE9BQUQsQ0FBdkI7QUFJRDtBQUNGLEdBVEQ7QUFVRCxDQVhpQixDQUFsQjtBQWFBakosa0JBQWtCLENBQUMsbUJBQUQsRUFBdUI0QixDQUFELElBQU87QUFDN0NDLFNBQU8sQ0FBQ0UsR0FBUixDQUFhLGFBQVlILENBQUMsQ0FBQ3VILElBQUssV0FBaEM7QUFDRCxDQUZpQixDQUFsQjtBQUlBbkosa0JBQWtCLENBQUMsYUFBRCxFQUFpQjRCLENBQUQsSUFBTztBQUN2Q0MsU0FBTyxDQUFDRSxHQUFSLENBQWEsUUFBT0gsQ0FBQyxDQUFDdUgsSUFBSyxXQUEzQjtBQUNELENBRmlCLENBQWxCO0FBSUEsS0FBS2pJLGtCQUFrQixDQUFDO0FBQUVoQixNQUFJLEVBQUU7QUFBUixDQUFELENBQXZCLEMiLCJmaWxlIjoidWkvdGVzdC90ZXN0LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIE92ZXJsYXlQbHVnaW4gQVBJIHNldHVwXHJcblxyXG5pbXBvcnQge1xyXG4gIEV2ZW50TWFwLFxyXG4gIEV2ZW50VHlwZSxcclxuICBJT3ZlcmxheUhhbmRsZXIsXHJcbiAgT3ZlcmxheUhhbmRsZXJGdW5jcyxcclxuICBPdmVybGF5SGFuZGxlclR5cGVzLFxyXG59IGZyb20gJy4uL3R5cGVzL2V2ZW50JztcclxuXHJcbmRlY2xhcmUgZ2xvYmFsIHtcclxuICBpbnRlcmZhY2UgV2luZG93IHtcclxuICAgIF9fT3ZlcmxheUNhbGxiYWNrOiBFdmVudE1hcFtFdmVudFR5cGVdO1xyXG4gICAgZGlzcGF0Y2hPdmVybGF5RXZlbnQ/OiB0eXBlb2YgcHJvY2Vzc0V2ZW50O1xyXG4gICAgT3ZlcmxheVBsdWdpbkFwaToge1xyXG4gICAgICByZWFkeTogYm9vbGVhbjtcclxuICAgICAgY2FsbEhhbmRsZXI6IChtc2c6IHN0cmluZywgY2I/OiAodmFsdWU6IHN0cmluZykgPT4gdW5rbm93bikgPT4gdm9pZDtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFRoaXMgaXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkuXHJcbiAgICAgKlxyXG4gICAgICogSXQgaXMgcmVjb21tZW5kZWQgdG8gaW1wb3J0IGZyb20gdGhpcyBmaWxlOlxyXG4gICAgICpcclxuICAgICAqIGBpbXBvcnQgeyBhZGRPdmVybGF5TGlzdGVuZXIgfSBmcm9tICcvcGF0aC90by9vdmVybGF5X3BsdWdpbl9hcGknO2BcclxuICAgICAqL1xyXG4gICAgYWRkT3ZlcmxheUxpc3RlbmVyOiBJQWRkT3ZlcmxheUxpc3RlbmVyO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZCBUaGlzIGlzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LlxyXG4gICAgICpcclxuICAgICAqIEl0IGlzIHJlY29tbWVuZGVkIHRvIGltcG9ydCBmcm9tIHRoaXMgZmlsZTpcclxuICAgICAqXHJcbiAgICAgKiBgaW1wb3J0IHsgcmVtb3ZlT3ZlcmxheUxpc3RlbmVyIH0gZnJvbSAnL3BhdGgvdG8vb3ZlcmxheV9wbHVnaW5fYXBpJztgXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZU92ZXJsYXlMaXN0ZW5lcjogSVJlbW92ZU92ZXJsYXlMaXN0ZW5lcjtcclxuICAgIC8qKlxyXG4gICAgICogQGRlcHJlY2F0ZWQgVGhpcyBpcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eS5cclxuICAgICAqXHJcbiAgICAgKiBJdCBpcyByZWNvbW1lbmRlZCB0byBpbXBvcnQgZnJvbSB0aGlzIGZpbGU6XHJcbiAgICAgKlxyXG4gICAgICogYGltcG9ydCB7IGNhbGxPdmVybGF5SGFuZGxlciB9IGZyb20gJy9wYXRoL3RvL292ZXJsYXlfcGx1Z2luX2FwaSc7YFxyXG4gICAgICovXHJcbiAgICBjYWxsT3ZlcmxheUhhbmRsZXI6IElPdmVybGF5SGFuZGxlcjtcclxuICB9XHJcbn1cclxuXHJcbnR5cGUgSUFkZE92ZXJsYXlMaXN0ZW5lciA9IDxUIGV4dGVuZHMgRXZlbnRUeXBlPihldmVudDogVCwgY2I6IEV2ZW50TWFwW1RdKSA9PiB2b2lkO1xyXG50eXBlIElSZW1vdmVPdmVybGF5TGlzdGVuZXIgPSA8VCBleHRlbmRzIEV2ZW50VHlwZT4oZXZlbnQ6IFQsIGNiOiBFdmVudE1hcFtUXSkgPT4gdm9pZDtcclxuXHJcbnR5cGUgU3Vic2NyaWJlcjxUPiA9IHtcclxuICBba2V5IGluIEV2ZW50VHlwZV0/OiBUW107XHJcbn07XHJcbnR5cGUgRXZlbnRQYXJhbWV0ZXIgPSBQYXJhbWV0ZXJzPEV2ZW50TWFwW0V2ZW50VHlwZV0+WzBdO1xyXG50eXBlIFZvaWRGdW5jPFQ+ID0gKC4uLmFyZ3M6IFRbXSkgPT4gdm9pZDtcclxuXHJcbmxldCBpbml0ZWQgPSBmYWxzZTtcclxuXHJcbmxldCB3c1VybDogUmVnRXhwRXhlY0FycmF5IHwgbnVsbCA9IG51bGw7XHJcbmxldCB3czogV2ViU29ja2V0IHwgbnVsbCA9IG51bGw7XHJcbmxldCBxdWV1ZTogKFxyXG4gIHwgeyBbczogc3RyaW5nXTogdW5rbm93biB9XHJcbiAgfCBbeyBbczogc3RyaW5nXTogdW5rbm93biB9LCAoKHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB1bmtub3duKSB8IHVuZGVmaW5lZF1cclxuKVtdIHwgbnVsbCA9IFtdO1xyXG5sZXQgcnNlcUNvdW50ZXIgPSAwO1xyXG5jb25zdCByZXNwb25zZVByb21pc2VzOiBSZWNvcmQ8bnVtYmVyLCAodmFsdWU6IHVua25vd24pID0+IHZvaWQ+ID0ge307XHJcblxyXG5jb25zdCBzdWJzY3JpYmVyczogU3Vic2NyaWJlcjxWb2lkRnVuYzx1bmtub3duPj4gPSB7fTtcclxuXHJcbmNvbnN0IHNlbmRNZXNzYWdlID0gKFxyXG4gIG1zZzogeyBbczogc3RyaW5nXTogdW5rbm93biB9LFxyXG4gIGNiPzogKHZhbHVlOiBzdHJpbmcgfCBudWxsKSA9PiB1bmtub3duLFxyXG4pOiB2b2lkID0+IHtcclxuICBpZiAod3MpIHtcclxuICAgIGlmIChxdWV1ZSlcclxuICAgICAgcXVldWUucHVzaChtc2cpO1xyXG4gICAgZWxzZVxyXG4gICAgICB3cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpZiAocXVldWUpXHJcbiAgICAgIHF1ZXVlLnB1c2goW21zZywgY2JdKTtcclxuICAgIGVsc2VcclxuICAgICAgd2luZG93Lk92ZXJsYXlQbHVnaW5BcGkuY2FsbEhhbmRsZXIoSlNPTi5zdHJpbmdpZnkobXNnKSwgY2IpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHByb2Nlc3NFdmVudCA9IDxUIGV4dGVuZHMgRXZlbnRUeXBlPihtc2c6IFBhcmFtZXRlcnM8RXZlbnRNYXBbVF0+WzBdKTogdm9pZCA9PiB7XHJcbiAgaW5pdCgpO1xyXG5cclxuICBjb25zdCBzdWJzID0gc3Vic2NyaWJlcnNbbXNnLnR5cGVdO1xyXG4gIHN1YnM/LmZvckVhY2goKHN1YikgPT4gc3ViKG1zZykpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpc3BhdGNoT3ZlcmxheUV2ZW50ID0gcHJvY2Vzc0V2ZW50O1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZE92ZXJsYXlMaXN0ZW5lcjogSUFkZE92ZXJsYXlMaXN0ZW5lciA9IChldmVudCwgY2IpOiB2b2lkID0+IHtcclxuICBpbml0KCk7XHJcblxyXG4gIGlmICghc3Vic2NyaWJlcnNbZXZlbnRdKSB7XHJcbiAgICBzdWJzY3JpYmVyc1tldmVudF0gPSBbXTtcclxuXHJcbiAgICBpZiAoIXF1ZXVlKSB7XHJcbiAgICAgIHNlbmRNZXNzYWdlKHtcclxuICAgICAgICBjYWxsOiAnc3Vic2NyaWJlJyxcclxuICAgICAgICBldmVudHM6IFtldmVudF0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3Vic2NyaWJlcnNbZXZlbnRdPy5wdXNoKGNiIGFzIFZvaWRGdW5jPHVua25vd24+KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVPdmVybGF5TGlzdGVuZXI6IElSZW1vdmVPdmVybGF5TGlzdGVuZXIgPSAoZXZlbnQsIGNiKTogdm9pZCA9PiB7XHJcbiAgaW5pdCgpO1xyXG5cclxuICBpZiAoc3Vic2NyaWJlcnNbZXZlbnRdKSB7XHJcbiAgICBjb25zdCBsaXN0ID0gc3Vic2NyaWJlcnNbZXZlbnRdO1xyXG4gICAgY29uc3QgcG9zID0gbGlzdD8uaW5kZXhPZihjYiBhcyBWb2lkRnVuYzx1bmtub3duPik7XHJcblxyXG4gICAgaWYgKHBvcyAmJiBwb3MgPiAtMSlcclxuICAgICAgbGlzdD8uc3BsaWNlKHBvcywgMSk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgY2FsbE92ZXJsYXlIYW5kbGVySW50ZXJuYWw6IElPdmVybGF5SGFuZGxlciA9IChcclxuICBfbXNnOiB7IFtzOiBzdHJpbmddOiB1bmtub3duIH0sXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuKTogUHJvbWlzZTxhbnk+ID0+IHtcclxuICBpbml0KCk7XHJcblxyXG4gIGNvbnN0IG1zZyA9IHtcclxuICAgIC4uLl9tc2csXHJcbiAgICByc2VxOiAwLFxyXG4gIH07XHJcbiAgbGV0IHA6IFByb21pc2U8dW5rbm93bj47XHJcblxyXG4gIGlmICh3cykge1xyXG4gICAgbXNnLnJzZXEgPSByc2VxQ291bnRlcisrO1xyXG4gICAgcCA9IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgIHJlc3BvbnNlUHJvbWlzZXNbbXNnLnJzZXFdID0gcmVzb2x2ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHNlbmRNZXNzYWdlKG1zZyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHAgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICBzZW5kTWVzc2FnZShtc2csIChkYXRhKSA9PiB7XHJcbiAgICAgICAgcmVzb2x2ZShkYXRhID09PSBudWxsID8gbnVsbCA6IEpTT04ucGFyc2UoZGF0YSkpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHA7XHJcbn07XHJcblxyXG50eXBlIE92ZXJyaWRlTWFwID0geyBbY2FsbCBpbiBPdmVybGF5SGFuZGxlclR5cGVzXT86IE92ZXJsYXlIYW5kbGVyRnVuY3NbY2FsbF0gfTtcclxuY29uc3QgY2FsbE92ZXJsYXlIYW5kbGVyT3ZlcnJpZGVNYXA6IE92ZXJyaWRlTWFwID0ge307XHJcblxyXG5leHBvcnQgY29uc3QgY2FsbE92ZXJsYXlIYW5kbGVyOiBJT3ZlcmxheUhhbmRsZXIgPSAoXHJcbiAgX21zZzogeyBbczogc3RyaW5nXTogdW5rbm93biB9LFxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbik6IFByb21pc2U8YW55PiA9PiB7XHJcbiAgaW5pdCgpO1xyXG5cclxuICAvLyBJZiB0aGlzIGBhc2AgaXMgaW5jb3JyZWN0LCB0aGVuIGl0IHdpbGwgbm90IGZpbmQgYW4gb3ZlcnJpZGUuXHJcbiAgLy8gVE9ETzogd2UgY291bGQgYWxzbyByZXBsYWNlIHRoaXMgd2l0aCBhIHR5cGUgZ3VhcmQuXHJcbiAgY29uc3QgdHlwZSA9IF9tc2cuY2FsbCBhcyBrZXlvZiBPdmVycmlkZU1hcDtcclxuICBjb25zdCBjYWxsRnVuYyA9IGNhbGxPdmVybGF5SGFuZGxlck92ZXJyaWRlTWFwW3R5cGVdID8/IGNhbGxPdmVybGF5SGFuZGxlckludGVybmFsO1xyXG5cclxuICAvLyBUaGUgYElPdmVybGF5SGFuZGxlcmAgdHlwZSBndWFyYW50ZWVzIHRoYXQgcGFyYW1ldGVycy9yZXR1cm4gdHlwZSBtYXRjaFxyXG4gIC8vIG9uZSBvZiB0aGUgb3ZlcmxheSBoYW5kbGVycy4gIFRoZSBPdmVycmlkZU1hcCBhbHNvIG9ubHkgc3RvcmVzIGZ1bmN0aW9uc1xyXG4gIC8vIHRoYXQgbWF0Y2ggYnkgdGhlIGRpc2NyaW1pbmF0aW5nIGBjYWxsYCBmaWVsZCwgYW5kIHNvIGFueSBvdmVycmlkZXNcclxuICAvLyBzaG91bGQgYmUgY29ycmVjdCBoZXJlLlxyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXHJcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnksQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1hcmd1bWVudFxyXG4gIHJldHVybiBjYWxsRnVuYyhfbXNnIGFzIGFueSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc2V0T3ZlcmxheUhhbmRsZXJPdmVycmlkZSA9IDxUIGV4dGVuZHMga2V5b2YgT3ZlcmxheUhhbmRsZXJGdW5jcz4oXHJcbiAgdHlwZTogVCxcclxuICBvdmVycmlkZT86IE92ZXJsYXlIYW5kbGVyRnVuY3NbVF0sXHJcbik6IHZvaWQgPT4ge1xyXG4gIGlmICghb3ZlcnJpZGUpIHtcclxuICAgIGRlbGV0ZSBjYWxsT3ZlcmxheUhhbmRsZXJPdmVycmlkZU1hcFt0eXBlXTtcclxuICAgIHJldHVybjtcclxuICB9XHJcbiAgY2FsbE92ZXJsYXlIYW5kbGVyT3ZlcnJpZGVNYXBbdHlwZV0gPSBvdmVycmlkZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0ID0gKCk6IHZvaWQgPT4ge1xyXG4gIGlmIChpbml0ZWQpXHJcbiAgICByZXR1cm47XHJcblxyXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgd3NVcmwgPSAvW1xcPyZdT1ZFUkxBWV9XUz0oW14mXSspLy5leGVjKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgIGlmICh3c1VybCkge1xyXG4gICAgICBjb25zdCBjb25uZWN0V3MgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICB3cyA9IG5ldyBXZWJTb2NrZXQod3NVcmw/LlsxXSBhcyBzdHJpbmcpO1xyXG5cclxuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB3cy5hZGRFdmVudExpc3RlbmVyKCdvcGVuJywgKCkgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCEnKTtcclxuXHJcbiAgICAgICAgICBjb25zdCBxID0gcXVldWUgPz8gW107XHJcbiAgICAgICAgICBxdWV1ZSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBjYWxsOiAnc3Vic2NyaWJlJyxcclxuICAgICAgICAgICAgZXZlbnRzOiBPYmplY3Qua2V5cyhzdWJzY3JpYmVycyksXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBmb3IgKGNvbnN0IG1zZyBvZiBxKSB7XHJcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShtc2cpKVxyXG4gICAgICAgICAgICAgIHNlbmRNZXNzYWdlKG1zZyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCAoX21zZykgPT4ge1xyXG4gICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBfbXNnLmRhdGEgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBtZXNzYWdlIGRhdGEgcmVjZWl2ZWQ6ICcsIF9tc2cpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBtc2cgPSBKU09OLnBhcnNlKF9tc2cuZGF0YSkgYXMgRXZlbnRQYXJhbWV0ZXIgJiB7IHJzZXE/OiBudW1iZXIgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChtc2cucnNlcSAhPT0gdW5kZWZpbmVkICYmIHJlc3BvbnNlUHJvbWlzZXNbbXNnLnJzZXFdKSB7XHJcbiAgICAgICAgICAgICAgcmVzcG9uc2VQcm9taXNlc1ttc2cucnNlcV0/Lihtc2cpO1xyXG4gICAgICAgICAgICAgIGRlbGV0ZSByZXNwb25zZVByb21pc2VzW21zZy5yc2VxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBwcm9jZXNzRXZlbnQobXNnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIG1lc3NhZ2UgcmVjZWl2ZWQ6ICcsIF9tc2cpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHdzLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4ge1xyXG4gICAgICAgICAgcXVldWUgPSBudWxsO1xyXG5cclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdUcnlpbmcgdG8gcmVjb25uZWN0Li4uJyk7XHJcbiAgICAgICAgICAvLyBEb24ndCBzcGFtIHRoZSBzZXJ2ZXIgd2l0aCByZXRyaWVzLlxyXG4gICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25uZWN0V3MoKTtcclxuICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25uZWN0V3MoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHdhaXRGb3JBcGkgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZiAoIXdpbmRvdy5PdmVybGF5UGx1Z2luQXBpIHx8ICF3aW5kb3cuT3ZlcmxheVBsdWdpbkFwaS5yZWFkeSkge1xyXG4gICAgICAgICAgd2luZG93LnNldFRpbWVvdXQod2FpdEZvckFwaSwgMzAwKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHEgPSBxdWV1ZSA/PyBbXTtcclxuICAgICAgICBxdWV1ZSA9IG51bGw7XHJcblxyXG4gICAgICAgIHdpbmRvdy5fX092ZXJsYXlDYWxsYmFjayA9IHByb2Nlc3NFdmVudDtcclxuXHJcbiAgICAgICAgc2VuZE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgY2FsbDogJ3N1YnNjcmliZScsXHJcbiAgICAgICAgICBldmVudHM6IE9iamVjdC5rZXlzKHN1YnNjcmliZXJzKSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHEpIHtcclxuICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGl0ZW0pKVxyXG4gICAgICAgICAgICBzZW5kTWVzc2FnZShpdGVtWzBdLCBpdGVtWzFdKTtcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcblxyXG4gICAgICB3YWl0Rm9yQXBpKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGVyZSB0aGUgT3ZlcmxheVBsdWdpbiBBUEkgaXMgcmVnaXN0ZXJlZCB0byB0aGUgd2luZG93IG9iamVjdCxcclxuICAgIC8vIGJ1dCB0aGlzIGlzIG1haW5seSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuRm9yIGNhY3Rib3QncyBidWlsdC1pbiBmaWxlcyxcclxuICAgIC8vIGl0IGlzIHJlY29tbWVuZGVkIHRvIHVzZSB0aGUgdmFyaW91cyBmdW5jdGlvbnMgZXhwb3J0ZWQgaW4gcmVzb3VyY2VzL292ZXJsYXlfcGx1Z2luX2FwaS50cy5cclxuICAgIHdpbmRvdy5hZGRPdmVybGF5TGlzdGVuZXIgPSBhZGRPdmVybGF5TGlzdGVuZXI7XHJcbiAgICB3aW5kb3cucmVtb3ZlT3ZlcmxheUxpc3RlbmVyID0gcmVtb3ZlT3ZlcmxheUxpc3RlbmVyO1xyXG4gICAgd2luZG93LmNhbGxPdmVybGF5SGFuZGxlciA9IGNhbGxPdmVybGF5SGFuZGxlcjtcclxuICAgIHdpbmRvdy5kaXNwYXRjaE92ZXJsYXlFdmVudCA9IGRpc3BhdGNoT3ZlcmxheUV2ZW50O1xyXG4gIH1cclxuXHJcbiAgaW5pdGVkID0gdHJ1ZTtcclxufTtcclxuIiwiaW1wb3J0IHsgYWRkT3ZlcmxheUxpc3RlbmVyLCBjYWxsT3ZlcmxheUhhbmRsZXIgfSBmcm9tICcuLi8uLi9yZXNvdXJjZXMvb3ZlcmxheV9wbHVnaW5fYXBpJztcclxuXHJcbmltcG9ydCAnLi4vLi4vcmVzb3VyY2VzL2RlZmF1bHRzLmNzcyc7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ0NoYW5nZVpvbmUnLCAoZSkgPT4ge1xyXG4gIGNvbnN0IGN1cnJlbnRab25lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRab25lJyk7XHJcbiAgaWYgKGN1cnJlbnRab25lKVxyXG4gICAgY3VycmVudFpvbmUuaW5uZXJUZXh0ID0gYGN1cnJlbnRab25lOiAke2Uuem9uZU5hbWV9ICgke2Uuem9uZUlEfSlgO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25JbkNvbWJhdENoYW5nZWRFdmVudCcsIChlKSA9PiB7XHJcbiAgY29uc3QgaW5Db21iYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5Db21iYXQnKTtcclxuICBpZiAoaW5Db21iYXQpIHtcclxuICAgIGluQ29tYmF0LmlubmVyVGV4dCA9IGBpbkNvbWJhdDogYWN0OiAke1xyXG4gICAgICBlLmRldGFpbC5pbkFDVENvbWJhdCA/ICd5ZXMnIDogJ25vJ1xyXG4gICAgfSBnYW1lOiAkeyhlLmRldGFpbC5pbkdhbWVDb21iYXQgPyAneWVzJyA6ICdubycpfWA7XHJcbiAgfVxyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25QbGF5ZXJDaGFuZ2VkRXZlbnQnLCAoZSkgPT4ge1xyXG4gIGNvbnN0IGhwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2hwJyk7XHJcbiAgaWYgKGhwKVxyXG4gICAgaHAuaW5uZXJUZXh0ID0gYCR7ZS5kZXRhaWwuY3VycmVudEhQfS8ke2UuZGV0YWlsLm1heEhQfSAoJHtlLmRldGFpbC5jdXJyZW50U2hpZWxkfSlgO1xyXG4gIGNvbnN0IG1wID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21wJyk7XHJcbiAgaWYgKG1wKVxyXG4gICAgbXAuaW5uZXJUZXh0ID0gYCR7ZS5kZXRhaWwuY3VycmVudE1QfS8ke2UuZGV0YWlsLm1heE1QfWA7XHJcbiAgY29uc3QgY3AgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3AnKTtcclxuICBpZiAoY3ApXHJcbiAgICBjcC5pbm5lclRleHQgPSBgJHtlLmRldGFpbC5jdXJyZW50Q1B9LyR7ZS5kZXRhaWwubWF4Q1B9YDtcclxuICBjb25zdCBncCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdncCcpO1xyXG4gIGlmIChncClcclxuICAgIGdwLmlubmVyVGV4dCA9IGAke2UuZGV0YWlsLmN1cnJlbnRHUH0vJHtlLmRldGFpbC5tYXhHUH1gO1xyXG4gIGNvbnN0IGpvYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqb2InKTtcclxuICBpZiAoam9iKVxyXG4gICAgam9iLmlubmVyVGV4dCA9IGAke2UuZGV0YWlsLmxldmVsfSAke2UuZGV0YWlsLmpvYn1gO1xyXG4gIGNvbnN0IGRlYnVnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlYnVnJyk7XHJcbiAgaWYgKGRlYnVnKVxyXG4gICAgZGVidWcuaW5uZXJUZXh0ID0gZS5kZXRhaWwuZGVidWdKb2I7XHJcblxyXG4gIGNvbnN0IGpvYkluZm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnam9iaW5mbycpO1xyXG4gIGlmIChqb2JJbmZvKSB7XHJcbiAgICBjb25zdCBkZXRhaWwgPSBlLmRldGFpbDtcclxuICAgIGlmIChkZXRhaWwuam9iID09PSAnUkRNJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gYCR7ZGV0YWlsLmpvYkRldGFpbC53aGl0ZU1hbmF9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmJsYWNrTWFuYX1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnV0FSJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gZGV0YWlsLmpvYkRldGFpbC5iZWFzdC50b1N0cmluZygpO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnRFJLJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLmJsb29kfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5kYXJrc2lkZU1pbGxpc2Vjb25kc30gfCAke2RldGFpbC5qb2JEZXRhaWwuZGFya0FydHMudG9TdHJpbmcoKX0gfCAke2RldGFpbC5qb2JEZXRhaWwubGl2aW5nU2hhZG93TWlsbGlzZWNvbmRzfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdHTkInICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBgJHtkZXRhaWwuam9iRGV0YWlsLmNhcnRyaWRnZXN9JHtkZXRhaWwuam9iRGV0YWlsLmNvbnRpbnVhdGlvblN0YXRlfWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdQTEQnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBkZXRhaWwuam9iRGV0YWlsLm9hdGgudG9TdHJpbmcoKTtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0JSRCcgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC5zb25nTmFtZX0gfCAke2RldGFpbC5qb2JEZXRhaWwuc29uZ1Byb2NzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5zb3VsR2F1Z2V9IHwgJHtkZXRhaWwuam9iRGV0YWlsLnNvbmdNaWxsaXNlY29uZHN9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0ROQycgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGAke2RldGFpbC5qb2JEZXRhaWwuZmVhdGhlcnN9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmVzcHJpdH0gfCBbJHtcclxuICAgICAgICBkZXRhaWwuam9iRGV0YWlsLnN0ZXBzLmpvaW4oJywgJylcclxuICAgICAgfV0gfCAke2RldGFpbC5qb2JEZXRhaWwuY3VycmVudFN0ZXB9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ05JTicgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9IGAke2RldGFpbC5qb2JEZXRhaWwuaHV0b25NaWxsaXNlY29uZHN9IHwgJHtkZXRhaWwuam9iRGV0YWlsLm5pbmtpQW1vdW50fWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdEUkcnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPVxyXG4gICAgICAgIGAke2RldGFpbC5qb2JEZXRhaWwuYmxvb2RNaWxsaXNlY29uZHN9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmxpZmVNaWxsaXNlY29uZHN9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmV5ZXNBbW91bnR9YDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ0JMTScgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC51bWJyYWxTdGFja3N9ICgke2RldGFpbC5qb2JEZXRhaWwudW1icmFsTWlsbGlzZWNvbmRzfSkgfCAke2RldGFpbC5qb2JEZXRhaWwudW1icmFsSGVhcnRzfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5mb3VsQ291bnR9ICR7ZGV0YWlsLmpvYkRldGFpbC5lbm9jaGlhbi50b1N0cmluZygpfSAoJHtkZXRhaWwuam9iRGV0YWlsLm5leHRQb2x5Z2xvdE1pbGxpc2Vjb25kc30pYDtcclxuICAgIH0gZWxzZSBpZiAoZGV0YWlsLmpvYiA9PT0gJ1RITScgJiYgZGV0YWlsLmpvYkRldGFpbCkge1xyXG4gICAgICBqb2JJbmZvLmlubmVyVGV4dCA9XHJcbiAgICAgICAgYCR7ZGV0YWlsLmpvYkRldGFpbC51bWJyYWxTdGFja3N9ICgke2RldGFpbC5qb2JEZXRhaWwudW1icmFsTWlsbGlzZWNvbmRzfSlgO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnV0hNJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLmxpbHlTdGFja3N9ICgke2RldGFpbC5qb2JEZXRhaWwubGlseU1pbGxpc2Vjb25kc30pIHwgJHtkZXRhaWwuam9iRGV0YWlsLmJsb29kbGlseVN0YWNrc31gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnU01OJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLmFldGhlcmZsb3dTdGFja3N9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmRyZWFkd3lybVN0YWNrc30gfCAke2RldGFpbC5qb2JEZXRhaWwuYmFoYW11dFN0YW5jZX0gfCAke2RldGFpbC5qb2JEZXRhaWwuYmFoYW11dFN1bW1vbmVkfSAoJHtkZXRhaWwuam9iRGV0YWlsLnN0YW5jZU1pbGxpc2Vjb25kc30pIHwgJHtkZXRhaWwuam9iRGV0YWlsLnBob2VuaXhSZWFkeX1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnU0NIJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLmFldGhlcmZsb3dTdGFja3N9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmZhaXJ5R2F1Z2V9IHwgJHtkZXRhaWwuam9iRGV0YWlsLmZhaXJ5U3RhdHVzfSAoJHtkZXRhaWwuam9iRGV0YWlsLmZhaXJ5TWlsbGlzZWNvbmRzfSlgO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnQUNOJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID0gZGV0YWlsLmpvYkRldGFpbC5hZXRoZXJmbG93U3RhY2tzLnRvU3RyaW5nKCk7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdBU1QnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBgJHtkZXRhaWwuam9iRGV0YWlsLmhlbGRDYXJkfSBbJHtkZXRhaWwuam9iRGV0YWlsLmFyY2FudW1zLmpvaW4oJywgJyl9XWA7XHJcbiAgICB9IGVsc2UgaWYgKGRldGFpbC5qb2IgPT09ICdNTksnICYmIGRldGFpbC5qb2JEZXRhaWwpIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSBgJHtkZXRhaWwuam9iRGV0YWlsLmNoYWtyYVN0YWNrc31gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnTUNIJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLmhlYXR9ICgke2RldGFpbC5qb2JEZXRhaWwub3ZlcmhlYXRNaWxsaXNlY29uZHN9KSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5iYXR0ZXJ5fSAoJHtkZXRhaWwuam9iRGV0YWlsLmJhdHRlcnlNaWxsaXNlY29uZHN9KSB8IGxhc3Q6ICR7ZGV0YWlsLmpvYkRldGFpbC5sYXN0QmF0dGVyeUFtb3VudH0gfCAke2RldGFpbC5qb2JEZXRhaWwub3ZlcmhlYXRBY3RpdmUudG9TdHJpbmcoKX0gfCAke2RldGFpbC5qb2JEZXRhaWwucm9ib3RBY3RpdmUudG9TdHJpbmcoKX1gO1xyXG4gICAgfSBlbHNlIGlmIChkZXRhaWwuam9iID09PSAnU0FNJyAmJiBkZXRhaWwuam9iRGV0YWlsKSB7XHJcbiAgICAgIGpvYkluZm8uaW5uZXJUZXh0ID1cclxuICAgICAgICBgJHtkZXRhaWwuam9iRGV0YWlsLmtlbmtpfSB8ICR7ZGV0YWlsLmpvYkRldGFpbC5tZWRpdGF0aW9uU3RhY2tzfSgke2RldGFpbC5qb2JEZXRhaWwuc2V0c3UudG9TdHJpbmcoKX0sJHtkZXRhaWwuam9iRGV0YWlsLmdldHN1LnRvU3RyaW5nKCl9LCR7ZGV0YWlsLmpvYkRldGFpbC5rYS50b1N0cmluZygpfSlgO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgam9iSW5mby5pbm5lclRleHQgPSAnJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnN0IHBvcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwb3MnKTtcclxuICBpZiAocG9zKSB7XHJcbiAgICBwb3MuaW5uZXJUZXh0ID0gYCR7ZS5kZXRhaWwucG9zLngudG9GaXhlZCgyKX0sJHtlLmRldGFpbC5wb3MueS50b0ZpeGVkKDIpfSwke1xyXG4gICAgICBlLmRldGFpbC5wb3Muei50b0ZpeGVkKDIpXHJcbiAgICB9YDtcclxuICB9XHJcbiAgY29uc3Qgcm90YXRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncm90YXRpb24nKTtcclxuICBpZiAocm90YXRpb24pXHJcbiAgICByb3RhdGlvbi5pbm5lclRleHQgPSBlLmRldGFpbC5yb3RhdGlvbi50b1N0cmluZygpO1xyXG4gIGNvbnN0IGJhaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFpdCcpO1xyXG4gIGlmIChiYWl0KVxyXG4gICAgYmFpdC5pbm5lclRleHQgPSBlLmRldGFpbC5iYWl0LnRvU3RyaW5nKCk7XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdFbm1pdHlUYXJnZXREYXRhJywgKGUpID0+IHtcclxuICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFyZ2V0Jyk7XHJcbiAgaWYgKHRhcmdldClcclxuICAgIHRhcmdldC5pbm5lclRleHQgPSBlLlRhcmdldCA/IGUuVGFyZ2V0Lk5hbWUgOiAnLS0nO1xyXG4gIGNvbnN0IHRpZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aWQnKTtcclxuICBpZiAodGlkKVxyXG4gICAgdGlkLmlubmVyVGV4dCA9IGUuVGFyZ2V0ID8gZS5UYXJnZXQuSUQudG9TdHJpbmcoMTYpIDogJyc7XHJcbiAgY29uc3QgdGRpc3RhbmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RkaXN0YW5jZScpO1xyXG4gIGlmICh0ZGlzdGFuY2UpXHJcbiAgICB0ZGlzdGFuY2UuaW5uZXJUZXh0ID0gZS5UYXJnZXQgPyBlLlRhcmdldC5EaXN0YW5jZS50b1N0cmluZygpIDogJyc7XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdvbkdhbWVFeGlzdHNFdmVudCcsIChfZSkgPT4ge1xyXG4gIC8vIGNvbnNvbGUubG9nKFwiR2FtZSBleGlzdHM6IFwiICsgZS5kZXRhaWwuZXhpc3RzKTtcclxufSk7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ29uR2FtZUFjdGl2ZUNoYW5nZWRFdmVudCcsIChfZSkgPT4ge1xyXG4gIC8vIGNvbnNvbGUubG9nKFwiR2FtZSBhY3RpdmU6IFwiICsgZS5kZXRhaWwuYWN0aXZlKTtcclxufSk7XHJcblxyXG5hZGRPdmVybGF5TGlzdGVuZXIoJ29uTG9nRXZlbnQnLCAoZSkgPT4ge1xyXG4gIGUuZGV0YWlsLmxvZ3MuZm9yRWFjaCgobG9nKSA9PiB7XHJcbiAgICAvLyBNYXRjaCBcIi9lY2hvIHR0czo8c3R1ZmY+XCJcclxuICAgIGNvbnN0IHIgPSAvMDA6MDAzODp0dHM6KC4qKS8uZXhlYyhsb2cpO1xyXG4gICAgaWYgKHIgJiYgclsxXSkge1xyXG4gICAgICB2b2lkIGNhbGxPdmVybGF5SGFuZGxlcih7XHJcbiAgICAgICAgY2FsbDogJ2NhY3Rib3RTYXknLFxyXG4gICAgICAgIHRleHQ6IHJbMV0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbmFkZE92ZXJsYXlMaXN0ZW5lcignb25Vc2VyRmlsZUNoYW5nZWQnLCAoZSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBVc2VyIGZpbGUgJHtlLmZpbGV9IGNoYW5nZWQhYCk7XHJcbn0pO1xyXG5cclxuYWRkT3ZlcmxheUxpc3RlbmVyKCdGaWxlQ2hhbmdlZCcsIChlKSA9PiB7XHJcbiAgY29uc29sZS5sb2coYEZpbGUgJHtlLmZpbGV9IGNoYW5nZWQhYCk7XHJcbn0pO1xyXG5cclxudm9pZCBjYWxsT3ZlcmxheUhhbmRsZXIoeyBjYWxsOiAnY2FjdGJvdFJlcXVlc3RTdGF0ZScgfSk7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=